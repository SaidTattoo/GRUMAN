<mat-card class="cardWithShadow">
    <mat-card-content class="p-24">
        <form [formGroup]="visitaForm" class="form-layout">
            <!-- Tipo Servicio -->
            <div class="row">
                <div class="col-sm-4 d-flex align-items-center">
                    <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-16">Tipo Servicio</mat-label>
                </div>
                <div class="col-sm-8">
                    <mat-form-field appearance="outline" class="w-100">
                        <mat-select formControlName="tipoServicio" placeholder="Seleccione tipo de servicio">
                            <mat-option value="Correctivo">Correctivo</mat-option>
                            <!-- Otros tipos de servicio -->
                        </mat-select>
                    </mat-form-field>
                </div>
            </div>

            <!-- Local -->
            <div class="row">
                <div class="col-sm-4 d-flex align-items-center">
                    <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-16">Local</mat-label>
                </div>
                <div class="col-sm-8">
                    <mat-form-field appearance="outline" class="w-100">
                        <mat-select formControlName="localId" placeholder="Seleccionar Local">
                            @for (local of locales; track local.id) {
                                <mat-option [value]="local.id">
                                    {{local.nombre_local}}
                                </mat-option>
                            }
                        </mat-select>
                    </mat-form-field>
                </div>
            </div>

            <!-- Sector del trabajo -->
            <div class="row">
                <div class="col-sm-4 d-flex align-items-center">
                    <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-16">Sector del trabajo</mat-label>
                </div>
                <div class="col-sm-8">
                    <mat-form-field appearance="outline" class="w-100">
                        <mat-select formControlName="sectorTrabajo" placeholder="Todos">
                            <mat-option value="todos">Todos</mat-option>
                            @for (sector of sectores; track sector.id) {
                                <mat-option [value]="sector.id">
                                    {{sector.nombre}}
                                </mat-option>
                            }
                        </mat-select>
                    </mat-form-field>
                </div>
            </div>

            <!-- Especialidad del trabajo -->
            <div class="row">
                <div class="col-sm-4 d-flex align-items-center">
                    <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-16">Especialidad del trabajo</mat-label>
                </div>
                <div class="col-sm-8">
                    <mat-form-field appearance="outline" class="w-100">
                        <mat-select formControlName="especialidad" placeholder="Otros Servicios">
                            <mat-option value="otros">Otros Servicios</mat-option>
                            <!-- Otras especialidades -->
                        </mat-select>
                    </mat-form-field>
                </div>
            </div>

            <!-- Ticket Gruman -->
            <div class="row">
                <div class="col-sm-4 d-flex align-items-center">
                    <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-16">Ticket Gruman</mat-label>
                </div>
                <div class="col-sm-8">
                    <mat-form-field appearance="outline" class="w-100">
                        <input matInput formControlName="ticketGruman" placeholder="Ingrese número de ticket">
                        <mat-hint>Corresponde al número de ticket interno de Gruman</mat-hint>
                    </mat-form-field>
                </div>
            </div>

            <!-- Observaciones -->
            <div class="row">
                <div class="col-sm-4 d-flex align-items-center">
                    <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-16">Observaciones</mat-label>
                </div>
                <div class="col-sm-8">
                    <mat-form-field appearance="outline" class="w-100">
                        <textarea matInput formControlName="observaciones" rows="4"></textarea>
                    </mat-form-field>
                </div>
            </div>

            <!-- Fecha de ingreso solicitud -->
            <div class="row">
                <div class="col-sm-4 d-flex align-items-center">
                    <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-16">Fecha de ingreso solicitud</mat-label>
                </div>
                <div class="col-sm-8">
                    <mat-form-field appearance="outline" class="w-100">
                        <input matInput [matDatepicker]="picker" formControlName="fechaIngreso">
                        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                        <mat-datepicker #picker></mat-datepicker>
                        <mat-hint>Corresponde la fecha propuesta de solución</mat-hint>
                    </mat-form-field>
                </div>
            </div>

            <!-- Subir Imagen -->
            <div class="row">
                <div class="col-sm-4 d-flex align-items-center">
                    <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-16">Subir Imagen</mat-label>
                </div>
                <div class="col-sm-8">
                    <input type="file" #fileInput (change)="onFileSelected($event)" style="display: none;" accept=".png,.jpg,.jpeg">
                    <button mat-raised-button color="primary" (click)="fileInput.click()">Seleccionar Archivo</button>
                    @if (selectedFileName) {
                        <span class="ms-2">{{ selectedFileName }}</span>
                    }
                    <mat-hint>Formato de imágenes admitido png, jpg, jpeg</mat-hint>
                </div>
            </div>

            <!-- Botones -->
            <div class="row mt-4">
                <div class="col-12 text-end">
                    <button mat-raised-button color="primary" (click)="onSubmit()" [disabled]="!visitaForm.valid">
                        Solicitar Visita
                    </button>
                </div>
            </div>
        </form>
    </mat-card-content>
</mat-card>
