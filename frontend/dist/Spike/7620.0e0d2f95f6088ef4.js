"use strict";(self.webpackChunkSpike=self.webpackChunkSpike||[]).push([[7620],{7620:(at,j,s)=>{s.r(j),s.d(j,{TIPO_SOLICITUD_ROUTES:()=>nt});var u=s(177),h=s(8834),c=s(5596),v=s(9213),d=s(9159),I=s(8032),b=s.n(I),t=s(3953),k=s(5312),N=s(1626);let T=(()=>{class e{constructor(i){this.http=i,this.apiUrl=`${k.c.apiUrl}/sla`}findAll(){return this.http.get(this.apiUrl)}findById(i){return this.http.get(`${this.apiUrl}/${i}`)}create(i){return this.http.post(this.apiUrl,i)}update(i,r){return this.http.put(`${this.apiUrl}/${i}`,r)}delete(i){return this.http.delete(`${this.apiUrl}/${i}`)}findAllClientes(){return this.http.get(`${k.c.apiUrl}/client`)}static#t=this.\u0275fac=function(r){return new(r||e)(t.KVO(N.Qq))};static#e=this.\u0275prov=t.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var E=s(8887);function A(e,n){1&e&&(t.j41(0,"th",15),t.EFF(1,"Nombre"),t.k0s())}function x(e,n){if(1&e&&(t.j41(0,"td",16),t.EFF(1),t.k0s()),2&e){const i=n.$implicit;t.R7$(),t.JRh(i.nombre)}}function G(e,n){1&e&&(t.j41(0,"th",15),t.EFF(1,"SLA D\xedas"),t.k0s())}function L(e,n){if(1&e&&(t.j41(0,"td",16),t.EFF(1),t.k0s()),2&e){const i=n.$implicit;t.R7$(),t.JRh(i.sla_dias)}}function Y(e,n){1&e&&(t.j41(0,"th",15),t.EFF(1,"SLA Horas"),t.k0s())}function U(e,n){if(1&e&&(t.j41(0,"td",16),t.EFF(1),t.k0s()),2&e){const i=n.$implicit;t.R7$(),t.JRh(i.sla_hora)}}function B(e,n){1&e&&(t.j41(0,"th",15),t.EFF(1,"Cliente"),t.k0s())}function V(e,n){if(1&e&&(t.j41(0,"td",16),t.EFF(1),t.k0s()),2&e){const i=n.$implicit;t.R7$(),t.JRh(i.cliente.nombre)}}function w(e,n){1&e&&(t.j41(0,"th",15),t.EFF(1,"Acciones"),t.k0s())}function O(e,n){if(1&e){const i=t.RV6();t.j41(0,"td",16)(1,"button",17),t.bIt("click",function(){const o=t.eBV(i).$implicit,l=t.XpG();return t.Njj(l.editar(o))}),t.j41(2,"mat-icon"),t.EFF(3,"edit"),t.k0s()(),t.j41(4,"button",18),t.bIt("click",function(){const o=t.eBV(i).$implicit,l=t.XpG();return t.Njj(l.eliminar(o))}),t.j41(5,"mat-icon"),t.EFF(6,"delete"),t.k0s()()()}}function M(e,n){1&e&&t.nrm(0,"tr",19)}function H(e,n){1&e&&t.nrm(0,"tr",20)}let X=(()=>{class e{constructor(i,r){this.tipoSolicitudService=i,this.router=r,this.displayedColumns=["nombre","sla_dias","sla_hora","cliente","acciones"],this.dataSource=[],this.clientes=[]}ngOnInit(){this.getAllTipoSolicitud(),this.getAllClientes()}getAllTipoSolicitud(){this.tipoSolicitudService.findAll().subscribe(i=>{this.dataSource=i})}getAllClientes(){this.tipoSolicitudService.findAllClientes().subscribe(i=>{this.clientes=i})}crear(){this.router.navigate(["/mantenedores/tipo-solicitud/crear"])}editar(i){this.router.navigate(["/mantenedores/tipo-solicitud/editar",i.id])}eliminar(i){b().fire({title:"\xbfEst\xe1s seguro?",text:"Los datos no se pueden modificar una vez guardados.",icon:"warning",showCancelButton:!0}).then(r=>{r.isConfirmed&&this.tipoSolicitudService.delete(i.id).subscribe(o=>{this.getAllTipoSolicitud()})})}static#t=this.\u0275fac=function(r){return new(r||e)(t.rXU(T),t.rXU(E.Ix))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-tipo-solicitud"]],standalone:!0,features:[t.aNF],decls:26,vars:3,consts:[[1,"cardWithShadow"],[1,"p-24"],[1,"row"],[1,"col-sm-12","text-right","m-b-24"],["mat-flat-button","","color","primary",3,"click"],["mat-table","",3,"dataSource"],["matColumnDef","nombre"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","sla_dias"],["matColumnDef","sla_hora"],["matColumnDef","cliente"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(r,o){1&r&&(t.j41(0,"mat-card",0)(1,"mat-card-content",1)(2,"div",2)(3,"div",3)(4,"button",4),t.bIt("click",function(){return o.crear()}),t.j41(5,"mat-icon"),t.EFF(6,"add"),t.k0s(),t.EFF(7," A\xf1adir"),t.k0s()()(),t.j41(8,"table",5),t.qex(9,6),t.DNE(10,A,2,0,"th",7)(11,x,2,1,"td",8),t.bVm(),t.qex(12,9),t.DNE(13,G,2,0,"th",7)(14,L,2,1,"td",8),t.bVm(),t.qex(15,10),t.DNE(16,Y,2,0,"th",7)(17,U,2,1,"td",8),t.bVm(),t.qex(18,11),t.DNE(19,B,2,0,"th",7)(20,V,2,1,"td",8),t.bVm(),t.qex(21,12),t.DNE(22,w,2,0,"th",7)(23,O,7,0,"td",8),t.bVm(),t.DNE(24,M,1,0,"tr",13)(25,H,1,0,"tr",14),t.k0s()()()),2&r&&(t.R7$(8),t.Y8G("dataSource",o.dataSource),t.R7$(16),t.Y8G("matHeaderRowDef",o.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",o.displayedColumns))},dependencies:[u.MD,c.Hu,c.RN,c.m2,d.tP,d.Zl,d.tL,d.ji,d.cC,d.YV,d.iL,d.KS,d.$R,d.YZ,d.NB,h.Hl,h.$z,h.iY,v.m_,v.An],styles:[".container[_ngcontent-%COMP%]{padding:20px;max-width:800px;margin:0 auto}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:16px;margin-top:24px}"]})}return e})();var a=s(9417),D=s(5416),F=s(9631),f=s(3719),_=s(850),$=s(9172),R=s(6354),y=s(6600);function q(e,n){1&e&&(t.j41(0,"mat-error"),t.EFF(1," El nombre es requerido "),t.k0s())}function P(e,n){1&e&&(t.j41(0,"mat-error"),t.EFF(1," Los d\xedas de SLA son requeridos "),t.k0s())}function J(e,n){1&e&&(t.j41(0,"mat-error"),t.EFF(1," Los d\xedas de SLA deben ser mayores o iguales a 0 "),t.k0s())}function z(e,n){1&e&&(t.j41(0,"mat-error"),t.EFF(1," La hora de SLA es requerida "),t.k0s())}function W(e,n){if(1&e&&(t.j41(0,"mat-option",16),t.EFF(1),t.k0s()),2&e){const i=n.$implicit;t.Y8G("value",i),t.R7$(),t.SpI(" ",i.nombre," ")}}function Z(e,n){1&e&&(t.j41(0,"mat-error"),t.EFF(1," El cliente es requerido "),t.k0s())}function K(e,n){1&e&&(t.j41(0,"mat-error"),t.EFF(1," El nombre es requerido "),t.k0s())}function tt(e,n){1&e&&(t.j41(0,"mat-error"),t.EFF(1," Los d\xedas de SLA son requeridos "),t.k0s())}function et(e,n){1&e&&(t.j41(0,"mat-error"),t.EFF(1," Los d\xedas de SLA deben ser mayores o iguales a 0 "),t.k0s())}function it(e,n){1&e&&(t.j41(0,"mat-error"),t.EFF(1," La hora de SLA es requerida "),t.k0s())}function ot(e,n){if(1&e&&(t.j41(0,"mat-option",16),t.EFF(1),t.k0s()),2&e){const i=n.$implicit;t.Y8G("value",i),t.R7$(),t.SpI(" ",i.nombre," ")}}function rt(e,n){1&e&&(t.j41(0,"mat-error"),t.EFF(1," El cliente es requerido "),t.k0s())}const nt=[{path:"",component:X,data:{title:"Tipo de solicitud"}},{path:"crear",component:(()=>{class e{constructor(i,r,o,l){this.fb=i,this.tipoSolicitudService=r,this.router=o,this.snackBar=l,this.clientes=[],this.form=this.fb.group({nombre:["",a.k0.required],sla_dias:["",[a.k0.required,a.k0.min(0)]],sla_hora:["",a.k0.required],id_cliente:["",a.k0.required]})}ngOnInit(){this.tipoSolicitudService.findAllClientes().subscribe(i=>{this.clientes=i,this.setupAutocomplete()})}setupAutocomplete(){this.filteredClientes=this.form.get("id_cliente").valueChanges.pipe((0,$.Z)(""),(0,R.T)(i=>this._filter(i)))}_filter(i){const r=i?.toLowerCase()||"";return this.clientes.filter(o=>o.nombre.toLowerCase().includes(r))}displayFn(i){return i?i.nombre:""}onSubmit(){if(this.form.valid){const i={...this.form.value,id_cliente:this.selectedCliente?.id};this.tipoSolicitudService.create(i).subscribe({next:()=>{this.snackBar.open("Tipo de solicitud creado exitosamente","Cerrar",{duration:3e3}),this.router.navigate(["/mantenedores/tipo-solicitud"])},error:r=>{this.snackBar.open("Error al crear el tipo de solicitud","Cerrar",{duration:3e3})}})}}cancelar(){this.router.navigate(["/mantenedores/tipo-solicitud"])}static#t=this.\u0275fac=function(r){return new(r||e)(t.rXU(a.ok),t.rXU(T),t.rXU(E.Ix),t.rXU(D.UG))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-crear-tipo-solicitud"]],standalone:!0,features:[t.Jv_([T]),t.aNF],decls:40,vars:12,consts:[["auto","matAutocomplete"],[1,"container"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","nombre","placeholder","Nombre del tipo de solicitud"],[4,"ngIf"],[1,"row"],[1,"col-md-6"],["matInput","","type","number","formControlName","sla_dias","placeholder","D\xedas de SLA"],["matInput","","type","number","formControlName","sla_hora","placeholder","Hora de SLA"],["type","text","matInput","","formControlName","id_cliente","placeholder","Buscar cliente",3,"matAutocomplete"],[3,"optionSelected","displayWith"],[3,"value",4,"ngFor","ngForOf"],[1,"button-container"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-raised-button","","color","","type","button",3,"click"],[3,"value"]],template:function(r,o){if(1&r){const l=t.RV6();t.j41(0,"div",1)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),t.EFF(4,"Crear tipo de solicitud"),t.k0s()(),t.j41(5,"mat-card-content")(6,"form",2),t.bIt("ngSubmit",function(){return t.eBV(l),t.Njj(o.onSubmit())}),t.j41(7,"mat-form-field",3)(8,"mat-label"),t.EFF(9,"Nombre"),t.k0s(),t.nrm(10,"input",4),t.DNE(11,q,2,0,"mat-error",5),t.k0s(),t.j41(12,"div",6)(13,"div",7)(14,"mat-form-field",3)(15,"mat-label"),t.EFF(16,"SLA D\xedas"),t.k0s(),t.nrm(17,"input",8),t.DNE(18,P,2,0,"mat-error",5)(19,J,2,0,"mat-error",5),t.k0s()(),t.j41(20,"div",7)(21,"mat-form-field",3)(22,"mat-label"),t.EFF(23,"SLA Hora"),t.k0s(),t.nrm(24,"input",9),t.DNE(25,z,2,0,"mat-error",5),t.k0s()()(),t.j41(26,"mat-form-field",3)(27,"mat-label"),t.EFF(28,"Cliente"),t.k0s(),t.nrm(29,"input",10),t.j41(30,"mat-autocomplete",11,0),t.bIt("optionSelected",function(p){return t.eBV(l),t.Njj(o.selectedCliente=p.option.value)}),t.DNE(32,W,2,2,"mat-option",12),t.nI1(33,"async"),t.k0s(),t.DNE(34,Z,2,0,"mat-error",5),t.k0s(),t.j41(35,"div",13)(36,"button",14),t.EFF(37,"Guardar"),t.k0s(),t.j41(38,"button",15),t.bIt("click",function(){return t.eBV(l),t.Njj(o.cancelar())}),t.EFF(39,"Cancelar"),t.k0s()()()()()()}if(2&r){let l,m,p,S,C;const g=t.sdS(31);t.R7$(6),t.Y8G("formGroup",o.form),t.R7$(5),t.Y8G("ngIf",null==(l=o.form.get("nombre"))?null:l.hasError("required")),t.R7$(7),t.Y8G("ngIf",null==(m=o.form.get("sla_dias"))?null:m.hasError("required")),t.R7$(),t.Y8G("ngIf",null==(p=o.form.get("sla_dias"))?null:p.hasError("min")),t.R7$(6),t.Y8G("ngIf",null==(S=o.form.get("sla_hora"))?null:S.hasError("required")),t.R7$(4),t.Y8G("matAutocomplete",g),t.R7$(),t.Y8G("displayWith",o.displayFn),t.R7$(2),t.Y8G("ngForOf",t.bMT(33,10,o.filteredClientes)),t.R7$(2),t.Y8G("ngIf",null==(C=o.form.get("id_cliente"))?null:C.hasError("required")),t.R7$(2),t.Y8G("disabled",!o.form.valid)}},dependencies:[u.MD,u.Sq,u.bT,u.Jj,a.X1,a.qT,a.me,a.Q0,a.BC,a.cb,a.j4,a.JD,F.fS,F.fg,f.rl,f.nJ,f.TL,h.Hl,h.$z,D._T,f.RG,c.Hu,c.RN,c.m2,c.MM,c.dh,_.jL,_.$3,y.wT,_.pN],styles:[".container[_ngcontent-%COMP%]{padding:20px;max-width:800px;margin:0 auto}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:16px;margin-top:24px}"]})}return e})(),data:{title:"Crear tipo de solicitud"}},{path:"editar/:id",component:(()=>{class e{constructor(i,r,o,l){this.fb=i,this.tipoSolicitudService=r,this.router=o,this.route=l,this.clientes=[],this.tipoSolicitud=this.fb.group({nombre:["",a.k0.required],sla_dias:["",[a.k0.required,a.k0.min(0)]],sla_hora:["",a.k0.required],id_cliente:["",a.k0.required]})}ngOnInit(){this.tipoSolicitudService.findById(this.route.snapshot.params.id).subscribe(i=>{this.solicitud=i,this.tipoSolicitudService.findAllClientes().subscribe(r=>{this.clientes=r;const o=this.clientes.find(l=>l.id===this.solicitud.id_cliente);o&&(this.selectedCliente=o,this.tipoSolicitud.patchValue({nombre:this.solicitud.nombre,sla_dias:this.solicitud.sla_dias,sla_hora:this.solicitud.sla_hora,id_cliente:o})),this.setupAutocomplete()})})}setupAutocomplete(){this.filteredClientes=this.tipoSolicitud.get("id_cliente").valueChanges.pipe((0,$.Z)(""),(0,R.T)(i=>this._filter(i)))}_filter(i){const r=i?.toLowerCase()||"";return this.clientes.filter(o=>o.nombre.toLowerCase().includes(r))}displayFn(i){return i?i.nombre:""}updateTipoSolicitud(){b().fire({title:"\xbfEst\xe1s seguro?",text:"Los datos no se pueden modificar una vez guardados.",icon:"warning",showCancelButton:!0}).then(i=>{if(i.isConfirmed&&this.tipoSolicitud.valid){const r={...this.tipoSolicitud.value,id_cliente:this.selectedCliente?.id};this.tipoSolicitudService.update(this.solicitud.id,r).subscribe({next:()=>{b().fire({title:"\xa1\xc9xito!",text:"Tipo de solicitud actualizado correctamente",icon:"success",confirmButtonText:"Aceptar"}).then(()=>{this.router.navigate(["/mantenedores/tipo-solicitud"])})},error:()=>{b().fire({title:"Error",text:"No se pudo actualizar el tipo de solicitud",icon:"error",confirmButtonText:"Aceptar"})}})}})}onCancel(){this.router.navigate(["/mantenedores/tipo-solicitud/"])}static#t=this.\u0275fac=function(r){return new(r||e)(t.rXU(a.ok),t.rXU(T),t.rXU(E.Ix),t.rXU(E.nX))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-editar-tipo-solicitud"]],standalone:!0,features:[t.aNF],decls:40,vars:12,consts:[["auto","matAutocomplete"],[1,"container"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","nombre","placeholder","Nombre del tipo de solicitud"],[4,"ngIf"],[1,"row"],[1,"col-md-6"],["matInput","","type","number","formControlName","sla_dias","placeholder","D\xedas de SLA"],["matInput","","type","number","formControlName","sla_hora","placeholder","Hora de SLA"],["type","text","matInput","","formControlName","id_cliente","placeholder","Buscar cliente",3,"matAutocomplete"],[3,"optionSelected","displayWith"],[3,"value",4,"ngFor","ngForOf"],[1,"button-container"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-raised-button","","color","","type","button",3,"click"],[3,"value"]],template:function(r,o){if(1&r){const l=t.RV6();t.j41(0,"div",1)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),t.EFF(4,"Editar tipo de solicitud"),t.k0s()(),t.j41(5,"mat-card-content")(6,"form",2),t.bIt("ngSubmit",function(){return t.eBV(l),t.Njj(o.updateTipoSolicitud())}),t.j41(7,"mat-form-field",3)(8,"mat-label"),t.EFF(9,"Nombre"),t.k0s(),t.nrm(10,"input",4),t.DNE(11,K,2,0,"mat-error",5),t.k0s(),t.j41(12,"div",6)(13,"div",7)(14,"mat-form-field",3)(15,"mat-label"),t.EFF(16,"SLA D\xedas"),t.k0s(),t.nrm(17,"input",8),t.DNE(18,tt,2,0,"mat-error",5)(19,et,2,0,"mat-error",5),t.k0s()(),t.j41(20,"div",7)(21,"mat-form-field",3)(22,"mat-label"),t.EFF(23,"SLA Hora"),t.k0s(),t.nrm(24,"input",9),t.DNE(25,it,2,0,"mat-error",5),t.k0s()()(),t.j41(26,"mat-form-field",3)(27,"mat-label"),t.EFF(28,"Cliente"),t.k0s(),t.nrm(29,"input",10),t.j41(30,"mat-autocomplete",11,0),t.bIt("optionSelected",function(p){return t.eBV(l),t.Njj(o.selectedCliente=p.option.value)}),t.DNE(32,ot,2,2,"mat-option",12),t.nI1(33,"async"),t.k0s(),t.DNE(34,rt,2,0,"mat-error",5),t.k0s(),t.j41(35,"div",13)(36,"button",14),t.EFF(37,"Guardar"),t.k0s(),t.j41(38,"button",15),t.bIt("click",function(){return t.eBV(l),t.Njj(o.onCancel())}),t.EFF(39,"Cancelar"),t.k0s()()()()()()}if(2&r){let l,m,p,S,C;const g=t.sdS(31);t.R7$(6),t.Y8G("formGroup",o.tipoSolicitud),t.R7$(5),t.Y8G("ngIf",null==(l=o.tipoSolicitud.get("nombre"))?null:l.hasError("required")),t.R7$(7),t.Y8G("ngIf",null==(m=o.tipoSolicitud.get("sla_dias"))?null:m.hasError("required")),t.R7$(),t.Y8G("ngIf",null==(p=o.tipoSolicitud.get("sla_dias"))?null:p.hasError("min")),t.R7$(6),t.Y8G("ngIf",null==(S=o.tipoSolicitud.get("sla_hora"))?null:S.hasError("required")),t.R7$(4),t.Y8G("matAutocomplete",g),t.R7$(),t.Y8G("displayWith",o.displayFn),t.R7$(2),t.Y8G("ngForOf",t.bMT(33,10,o.filteredClientes)),t.R7$(2),t.Y8G("ngIf",null==(C=o.tipoSolicitud.get("id_cliente"))?null:C.hasError("required")),t.R7$(2),t.Y8G("disabled",!o.tipoSolicitud.valid)}},dependencies:[u.MD,u.Sq,u.bT,u.Jj,a.X1,a.qT,a.me,a.Q0,a.BC,a.cb,a.j4,a.JD,c.Hu,c.RN,c.m2,c.MM,c.dh,f.RG,f.rl,f.nJ,f.TL,F.fS,F.fg,h.Hl,h.$z,_.jL,_.$3,y.wT,_.pN],styles:[".container[_ngcontent-%COMP%]{padding:20px;max-width:800px;margin:0 auto}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:16px;margin-top:24px}"]})}return e})(),data:{title:"Editar tipo de solicitud"}}]}}]);