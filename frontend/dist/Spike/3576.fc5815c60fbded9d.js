"use strict";(self.webpackChunkSpike=self.webpackChunkSpike||[]).push([[3576],{3576:(Z,p,s)=>{s.r(p),s.d(p,{AuthenticationRoutes:()=>H});var i=s(9417),c=s(8887),u=s(9164),b=s(8032),f=s.n(b),t=s(3953),g=s(6845),F=s(5386),h=s(7291),j=s(5416),w=s(2765),l=s(3719),v=s(9631),d=s(5596),C=s(8834);const E=()=>["/dashboards/dashboard1"];function R(e,a){1&e&&(t.j41(0,"a",6),t.nrm(1,"img",18),t.k0s()),2&e&&t.Y8G("routerLink",t.lJ4(1,E))}function y(e,a){1&e&&(t.j41(0,"h1"),t.EFF(1,"GRUMAN"),t.k0s())}function _(e,a){1&e&&(t.j41(0,"div",19),t.EFF(1,"Name is required."),t.k0s())}function B(e,a){1&e&&(t.j41(0,"div",19),t.EFF(1,"Name should be 6 character."),t.k0s())}function M(e,a){if(1&e&&(t.j41(0,"mat-hint",11),t.DNE(1,_,2,0,"div",19)(2,B,2,0,"div",19),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.vxM(n.f.email.errors&&n.f.email.errors.required?1:-1),t.R7$(),t.vxM(n.f.email.errors&&n.f.email.errors.minlength?2:-1)}}function N(e,a){1&e&&(t.j41(0,"div",19),t.EFF(1,"Password is required."),t.k0s())}function A(e,a){if(1&e&&(t.j41(0,"mat-hint",11),t.DNE(1,N,2,0,"div",19),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.vxM(n.f.password.errors&&n.f.password.errors.required?1:-1)}}let $=(()=>{class e{constructor(n,r,o,m,k){this.settings=n,this.router=r,this.authService=o,this.storage=m,this.snackBar=k,this.options=this.settings.getOptions(),this.form=new i.gE({email:new i.MJ("",[i.k0.required,i.k0.minLength(6)]),password:new i.MJ("",[i.k0.required])})}get f(){return this.form.controls}ngOnInit(){}submit(){this.form.valid&&this.authService.login(this.form.value.email||"",this.form.value.password||"").subscribe(o=>{if(console.log(o),"tecnico"===o.user.profile)return void f().fire({icon:"warning",title:"Acceso Denegado",text:"Por favor, utilice la aplicaci\xf3n m\xf3vil para tablets para iniciar sesi\xf3n como t\xe9cnico.",confirmButtonText:"Entendido"});this.storage.setItem("token",o.token);const m={...o.user,companies:o.user.clientes,selectedCompany:o.user.clientes[0]};delete m.clientes,this.storage.setItem("currentUser",m),this.router.navigate((m.companies||[]).length>1?["/auth/select-client"]:["/dashboards"])},o=>{f().fire({icon:"error",title:"Oops...",text:"Credenciales incorrectas!"})})}onForgotPassword(){console.log("onForgotPassword"),this.router.navigate(["/auth/forgot-password"],{skipLocationChange:!1}).then(()=>{console.log("Navigation successful")}).catch(n=>{console.error("Navigation error:",n),this.snackBar.open("Error al navegar a recuperar contrase\xf1a","Cerrar",{duration:3e3})})}static#t=this.\u0275fac=function(r){return new(r||e)(t.rXU(g.P),t.rXU(c.Ix),t.rXU(F.u),t.rXU(h.n),t.rXU(j.UG))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-boxed-login"]],standalone:!0,features:[t.aNF],decls:28,vars:6,consts:[[1,"blank-layout-container","justify-content-center","align-items-center"],[1,"position-relative","row","w-100","h-100vh","bg-gredient","justify-content-center"],[1,"col-lg-4","d-flex","align-items-center"],[1,"cardWithShadow","boxed-auth"],[1,"p-32"],[1,"text-center"],[3,"routerLink"],[1,"m-t-30",3,"ngSubmit","formGroup"],[1,"mat-subtitle-2","f-s-14","f-w-600","m-b-12","d-block"],["appearance","outline","color","primary",1,"w-100"],["matInput","","formControlName","email"],[1,"m-b-16","error-msg"],["matInput","","type","password","formControlName","password"],[1,"d-flex","align-items-center","m-b-12"],["color","primary"],[1,"text-primary","f-w-600","text-decoration-none","m-l-auto","f-s-14","cursor-pointer",3,"click"],["mat-flat-button","","color","primary",1,"w-100",3,"disabled"],[1,"d-block","f-w-500","text-center","m-t-24"],["src","./assets/images/empresas/atlantis_logo.jpg","alt","logo",1,"align-middle","m-2"],[1,"text-error"]],template:function(r,o){1&r&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-card",3)(4,"mat-card-content",4)(5,"div",5),t.DNE(6,R,2,2,"a",6)(7,y,2,0,"h1"),t.k0s(),t.j41(8,"form",7),t.bIt("ngSubmit",function(){return o.submit()}),t.j41(9,"mat-label",8),t.EFF(10,"Email"),t.k0s(),t.j41(11,"mat-form-field",9),t.nrm(12,"input",10),t.DNE(13,M,3,2,"mat-hint",11),t.k0s(),t.j41(14,"mat-label",8),t.EFF(15,"Contrase\xf1a"),t.k0s(),t.j41(16,"mat-form-field",9),t.nrm(17,"input",12),t.DNE(18,A,2,1,"mat-hint",11),t.k0s(),t.j41(19,"div",13)(20,"mat-checkbox",14),t.EFF(21,"Recordar este dispositivo"),t.k0s(),t.j41(22,"a",15),t.bIt("click",function(){return o.onForgotPassword()}),t.EFF(23,"\xbfOlvidaste tu contrase\xf1a?"),t.k0s()(),t.j41(24,"button",16),t.EFF(25," Iniciar sesi\xf3n "),t.k0s()(),t.j41(26,"span",17),t.EFF(27," Atlantis | Grupo de Mantenimiento y Servicios. |\xa9 2014-2024 Version :1.0.8 "),t.k0s()()()()()()),2&r&&(t.R7$(6),t.vxM("light"===o.options.theme?6:-1),t.R7$(),t.vxM("dark"===o.options.theme?7:-1),t.R7$(),t.Y8G("formGroup",o.form),t.R7$(5),t.vxM(o.f.email.touched&&o.f.email.invalid?13:-1),t.R7$(5),t.vxM(o.f.password.touched&&o.f.password.invalid?18:-1),t.R7$(6),t.Y8G("disabled",!o.form.valid))},dependencies:[c.iI,c.Wk,u.G,w.So,l.rl,l.nJ,l.MV,v.fg,d.RN,d.m2,C.$z,i.YN,i.qT,i.me,i.BC,i.cb,i.X1,i.j4,i.JD],encapsulation:2})}return e})();const S=()=>["/authentication/boxed-login"],x=()=>["/dashboards/dashboard1"];function T(e,a){1&e&&(t.j41(0,"a",6),t.nrm(1,"img",25),t.k0s()),2&e&&t.Y8G("routerLink",t.lJ4(1,x))}function G(e,a){1&e&&(t.j41(0,"a",6),t.nrm(1,"img",25),t.k0s()),2&e&&t.Y8G("routerLink",t.lJ4(1,x))}function I(e,a){1&e&&(t.j41(0,"div",26),t.EFF(1,"Name is required."),t.k0s())}function L(e,a){1&e&&(t.j41(0,"div",26),t.EFF(1,"Name should be 6 character."),t.k0s())}function U(e,a){if(1&e&&(t.j41(0,"mat-hint",19),t.DNE(1,I,2,0,"div",26)(2,L,2,0,"div",26),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.vxM(n.f.uname.errors&&n.f.uname.errors.required?1:-1),t.R7$(),t.vxM(n.f.uname.errors&&n.f.uname.errors.minlength?2:-1)}}function D(e,a){1&e&&(t.j41(0,"div",26),t.EFF(1,"Email is required."),t.k0s())}function X(e,a){if(1&e&&(t.j41(0,"mat-hint",19),t.DNE(1,D,2,0,"div",26),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.vxM(n.f.email.errors&&n.f.email.errors.required?1:-1)}}function P(e,a){1&e&&(t.j41(0,"div",26),t.EFF(1,"Password is required."),t.k0s())}function O(e,a){if(1&e&&(t.j41(0,"mat-hint",19),t.DNE(1,P,2,0,"div",26),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.vxM(n.f.password.errors&&n.f.password.errors.required?1:-1)}}let J=(()=>{class e{constructor(n,r){this.settings=n,this.router=r,this.options=this.settings.getOptions(),this.form=new i.gE({uname:new i.MJ("",[i.k0.required,i.k0.minLength(6)]),email:new i.MJ("",[i.k0.required]),password:new i.MJ("",[i.k0.required])})}get f(){return this.form.controls}submit(){this.router.navigate(["/dashboards/dashboard1"])}static#t=this.\u0275fac=function(r){return new(r||e)(t.rXU(g.P),t.rXU(c.Ix))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-boxed-register"]],standalone:!0,features:[t.aNF],decls:43,vars:9,consts:[[1,"blank-layout-container","justify-content-center","align-items-center"],[1,"position-relative","row","w-100","h-100vh","bg-gredient","justify-content-center"],[1,"col-lg-4","d-flex","align-items-center"],[1,"cardWithShadow","boxed-auth"],[1,"p-32"],[1,"text-center"],[3,"routerLink"],[1,"row","m-t-24","custom-row"],[1,"col-12","col-sm-6"],["mat-stroked-button","",1,"w-100"],[1,"d-flex","align-items-center"],["src","/assets/images/svgs/google-icon.svg","alt","google","width","16",1,"m-r-8"],["mat-stroked-button","",1,"w-100","d-flex","align-items-center"],["src","/assets/images/svgs/facebook-icon.svg","alt","facebook","width","40",1,"m-r-4"],[1,"or-border","m-t-30"],[1,"m-t-30",3,"ngSubmit","formGroup"],[1,"mat-subtitle-2","f-s-14","f-w-600","m-b-12","d-block"],["appearance","outline","color","primary",1,"w-100"],["matInput","","formControlName","uname"],[1,"m-b-16","error-msg"],["matInput","","type","email","formControlName","email"],["matInput","","type","password","formControlName","password"],["mat-flat-button","","color","primary",1,"w-100",3,"disabled"],[1,"d-block","f-w-500","text-center","m-t-24"],[1,"text-decoration-none","text-primary","f-w-500","f-s-14",3,"routerLink"],["src","./assets/images/empresas/atlantis_logo.jpg","alt","logo",1,"align-middle","m-2"],[1,"text-error"]],template:function(r,o){1&r&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-card",3)(4,"mat-card-content",4)(5,"div",5),t.DNE(6,T,2,2,"a",6)(7,G,2,2,"a",6),t.k0s(),t.j41(8,"div",7)(9,"div",8)(10,"button",9)(11,"div",10),t.nrm(12,"img",11),t.EFF(13," Google "),t.k0s()()(),t.j41(14,"div",8)(15,"button",12)(16,"div",10),t.nrm(17,"img",13),t.EFF(18," Facebook "),t.k0s()()()(),t.j41(19,"div",14),t.EFF(20,"or sign up with"),t.k0s(),t.j41(21,"form",15),t.bIt("ngSubmit",function(){return o.submit()}),t.j41(22,"mat-label",16),t.EFF(23,"Name"),t.k0s(),t.j41(24,"mat-form-field",17),t.nrm(25,"input",18),t.DNE(26,U,3,2,"mat-hint",19),t.k0s(),t.j41(27,"mat-label",16),t.EFF(28,"Email Adddress"),t.k0s(),t.j41(29,"mat-form-field",17),t.nrm(30,"input",20),t.DNE(31,X,2,1,"mat-hint",19),t.k0s(),t.j41(32,"mat-label",16),t.EFF(33,"Password"),t.k0s(),t.j41(34,"mat-form-field",17),t.nrm(35,"input",21),t.DNE(36,O,2,1,"mat-hint",19),t.k0s(),t.j41(37,"button",22),t.EFF(38," Sign Up "),t.k0s()(),t.j41(39,"span",23),t.EFF(40,"Already have an Account? "),t.j41(41,"a",24),t.EFF(42," Sign In"),t.k0s()()()()()()()),2&r&&(t.R7$(6),t.vxM("light"===o.options.theme?6:-1),t.R7$(),t.vxM("dark"===o.options.theme?7:-1),t.R7$(14),t.Y8G("formGroup",o.form),t.R7$(5),t.vxM(o.f.uname.touched&&o.f.uname.invalid?26:-1),t.R7$(5),t.vxM(o.f.email.touched&&o.f.email.invalid?31:-1),t.R7$(5),t.vxM(o.f.password.touched&&o.f.password.invalid?36:-1),t.R7$(),t.Y8G("disabled",!o.form.valid),t.R7$(4),t.Y8G("routerLink",t.lJ4(8,S)))},dependencies:[c.iI,c.Wk,u.G,l.rl,l.nJ,l.MV,v.fg,d.RN,d.m2,C.$z,i.YN,i.qT,i.me,i.BC,i.cb,i.X1,i.j4,i.JD],encapsulation:2})}return e})();var Y=s(177),V=s(3443);const W=(e,a)=>a.id;function z(e,a){if(1&e){const n=t.RV6();t.j41(0,"div",3)(1,"mat-card",4),t.bIt("click",function(){const o=t.eBV(n).$implicit,m=t.XpG();return t.Njj(m.selectCompany(o))}),t.j41(2,"div",5),t.nrm(3,"img",6),t.k0s(),t.j41(4,"div",7)(5,"h3"),t.EFF(6),t.k0s()()()()}if(2&e){const n=a.$implicit;t.R7$(3),t.Y8G("src",n.logo,t.B4B)("alt",n.nombre),t.R7$(3),t.JRh(n.nombre)}}const H=[{path:"login",component:$},{path:"register",component:J},{path:"select-client",component:(()=>{class e{constructor(n,r,o){this.router=n,this.storage=r,this.userService=o,this.companies=[]}ngOnInit(){this.userSub=this.storage.user$.subscribe(n=>{this.user=n,this.companies=n?.companies||[],1===this.companies.length&&this.selectCompany(this.companies[0])})}ngOnDestroy(){this.userSub&&this.userSub.unsubscribe()}selectCompany(n){const r=this.userService.getCurrentUser(),o={...r,selectedCompany:n,companies:r.companies};this.userService.updateCurrentUser(o),this.storage.emitCompanyChangeEvent(n),this.storage.setItem("selectedCompanyId",n.id.toString()),this.router.navigate(["/dashboards"])}static#t=this.\u0275fac=function(r){return new(r||e)(t.rXU(c.Ix),t.rXU(h.n),t.rXU(V.D))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-select-client"]],standalone:!0,features:[t.aNF],decls:6,vars:0,consts:[[1,"container","d-flex","flex-column","justify-content-center","align-items-center","min-vh-100"],[1,"mb-4","text-center"],[1,"row","row-cols-2","row-cols-md-3","g-4","vh-100","w-100"],[1,"col","p-4"],[1,"h-100","d-flex","flex-column","shadow","cursor-pointer",3,"click"],[1,"company-logo-container"],[1,"company-logo",3,"src","alt"],[1,"company-name"]],template:function(r,o){1&r&&(t.j41(0,"div",0)(1,"h2",1),t.EFF(2,"Seleccionar Cliente"),t.k0s(),t.j41(3,"div",2),t.Z7z(4,z,7,3,"div",3,W),t.k0s()()),2&r&&(t.R7$(4),t.Dyx(o.companies))},dependencies:[Y.MD,d.Hu,d.RN],styles:[".container[_ngcontent-%COMP%]{height:100vh}",".company-logo-container[_ngcontent-%COMP%] {\n    height: 150px; \n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    padding: 1rem;\n  }\n\n  .company-logo[_ngcontent-%COMP%] {\n    max-width: 80%;\n    max-height: 100%;\n    object-fit: contain;\n  }\n\n  .company-name[_ngcontent-%COMP%] {\n    padding: 1rem;\n    text-align: center;\n    border-top: 1px solid #eee;\n    background: #f8f9fa;\n  }\n\n  .company-name[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n    margin: 0;\n    font-size: 1.1rem;\n    line-height: 1.2;\n  }\n\n  .cursor-pointer[_ngcontent-%COMP%] {\n    cursor: pointer;\n    transition: transform 0.2s;\n  }\n\n  .cursor-pointer[_ngcontent-%COMP%]:hover {\n    transform: translateY(-5px);\n  }"]})}return e})()}]}}]);