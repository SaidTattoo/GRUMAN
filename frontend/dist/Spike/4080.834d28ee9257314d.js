"use strict";(self.webpackChunkSpike=self.webpackChunkSpike||[]).push([[4080],{4080:(we,E,m)=>{m.r(E),m.d(E,{CLIENTES_ROUTES:()=>Ge});var g=m(8834),u=m(5596),f=m(3719),h=m(9213),F=m(9631),S=m(6695),x=m(2042),p=m(9159),T=m(4823),y=m(8032),k=m.n(y),e=m(3953),v=m(1357),D=m(4006),_=m(8887);function V(i,s){1&i&&(e.j41(0,"th",22),e.EFF(1," Nombre "),e.k0s())}function G(i,s){if(1&i&&(e.j41(0,"td",23),e.EFF(1),e.k0s()),2&i){const t=s.$implicit;e.R7$(),e.SpI(" ",t.nombre," ")}}function w(i,s){1&i&&(e.j41(0,"th",22),e.EFF(1," Rut "),e.k0s())}function X(i,s){if(1&i&&(e.j41(0,"td",23),e.EFF(1),e.k0s()),2&i){const t=s.$implicit,o=e.XpG();e.R7$(),e.SpI(" ",o.formatRut(t.rut)," ")}}function B(i,s){1&i&&(e.j41(0,"th",22),e.EFF(1," Razon Social "),e.k0s())}function Y(i,s){if(1&i&&(e.j41(0,"td",23),e.EFF(1),e.k0s()),2&i){const t=s.$implicit;e.R7$(),e.SpI(" ",t.razonSocial," ")}}function U(i,s){1&i&&(e.j41(0,"th",22),e.EFF(1," Sobre Precio Repuestos "),e.k0s())}function z(i,s){if(1&i&&(e.j41(0,"td",23),e.EFF(1),e.k0s()),2&i){const t=s.$implicit;e.R7$(),e.SpI(" ",t.sobreprecio," % ")}}function A(i,s){1&i&&(e.j41(0,"th",22),e.EFF(1," Valor Por Local "),e.k0s())}function J(i,s){if(1&i&&(e.j41(0,"td",23),e.EFF(1),e.k0s()),2&i){const t=s.$implicit;e.R7$(),e.SpI(" ",t.valorPorLocal," UF ")}}function q(i,s){1&i&&(e.j41(0,"th",22),e.EFF(1," Logo "),e.k0s())}function H(i,s){if(1&i&&e.nrm(0,"img",24),2&i){const t=e.XpG().$implicit;e.Y8G("src",t.logo,e.B4B)}}function Q(i,s){1&i&&(e.j41(0,"span",25),e.EFF(1," No hay imagen"),e.k0s())}function W(i,s){if(1&i&&(e.j41(0,"td",23),e.DNE(1,H,1,1,"img",24)(2,Q,2,0,"span",25),e.k0s()),2&i){const t=s.$implicit;e.R7$(),e.vxM(t.logo?1:2)}}function Z(i,s){1&i&&(e.j41(0,"th",22),e.EFF(1," Acciones "),e.k0s())}function K(i,s){if(1&i){const t=e.RV6();e.j41(0,"td",23)(1,"button",26),e.bIt("click",function(){const n=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.verListaInspeccion(n))}),e.j41(2,"mat-icon"),e.EFF(3,"list"),e.k0s()(),e.j41(4,"button",26),e.bIt("click",function(){const n=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.openEditarClienteModal(n))}),e.j41(5,"mat-icon"),e.EFF(6,"edit"),e.k0s()(),e.j41(7,"button",27),e.bIt("click",function(){const n=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.openEliminarClienteModal(n))}),e.j41(8,"mat-icon"),e.EFF(9,"delete"),e.k0s()(),e.j41(10,"button",26),e.bIt("click",function(){const n=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.agregarDocumento(n))}),e.j41(11,"mat-icon"),e.EFF(12,"add"),e.k0s()(),e.j41(13,"button",28)(14,"mat-icon"),e.EFF(15,"person_add"),e.k0s()()()}2&i&&(e.R7$(),e.Y8G("matTooltip","Ver lista inspecciones"),e.R7$(3),e.Y8G("matTooltip","Editar cliente"),e.R7$(3),e.Y8G("matTooltip","Eliminar cliente"),e.R7$(3),e.Y8G("matTooltip","Agregar documento al cliente"),e.R7$(3),e.Y8G("matTooltip","Agregar usuario al cliente"))}function ee(i,s){1&i&&e.nrm(0,"tr",29)}function te(i,s){1&i&&e.nrm(0,"tr",30)}function ie(i,s){1&i&&(e.j41(0,"tr",31)(1,"td",32),e.EFF(2," No se encontraron datos "),e.k0s()())}let ne=(()=>{class i{constructor(t,o,n){this.clientesService=t,this.dialog=o,this.router=n,this.displayedColumns=["nombre","rut","razonSocial","logo","sobrePrecio","valorPorLocal","acciones"],this.dataSource=new p.I6}ngOnInit(){this.clientesService.getClientes().subscribe(t=>{this.dataSource.data=t,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}formatRut(t){return t?t.replace(/^(\d{1,2})(\d{3})(\d{3})([\dkK])$/,"$1.$2.$3-$4"):""}openCrearClienteModal(){this.router.navigate(["/mantenedores/clientes/crear"])}openEditarClienteModal(t){this.router.navigate(["/mantenedores/clientes/editar",t.id])}openEliminarClienteModal(t){k().fire({title:"Eliminar Cliente",text:"\xbfEst\xe1s seguro de que deseas eliminar este cliente?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xed, eliminar"}).then(o=>{o.isConfirmed&&this.clientesService.deleteCliente(t.id).subscribe(()=>{this.dataSource.data=this.dataSource.data.filter(n=>n.id!==t.id),k().fire("Eliminado","El cliente ha sido eliminado.","success")})})}agregarDocumento(t){this.router.navigate(["/mantenedores/documentos/subir-documento",{tipo:2,tecnico:null,cliente:t.id,repuesto:null,vehiculo:null}])}agregarUsuarioACliente(t){this.router.navigate(["/mantenedores/cliente-usuarios",t.id])}verListaInspeccion(t){this.router.navigate(["/mantenedores/clientes/ver-lista-inspeccion",t.id])}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(v.T),e.rXU(D.bZ),e.rXU(_.Ix))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["app-clientes"]],viewQuery:function(o,n){if(1&o&&(e.GBs(S.iy,5),e.GBs(x.B4,5)),2&o){let r;e.mGM(r=e.lsd())&&(n.paginator=r.first),e.mGM(r=e.lsd())&&(n.sort=r.first)}},standalone:!0,features:[e.aNF],decls:36,vars:3,consts:[["input",""],[1,"cardWithShadow"],[1,"p-24"],[1,"row","justify-content-between","m-b-8"],[1,"col-sm-4","col-lg-3"],["mat-flat-button","","color","primary",3,"click"],["appearance","outline",1,"w-100","hide-hint"],["matInput","","placeholder","Buscar",3,"keyup"],[1,"table-responsive","m-t-30"],["mat-table","",1,"w-100","mat-elevation-z8",3,"dataSource"],["matColumnDef","nombre"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14 p-l-0",4,"matHeaderCellDef"],["mat-cell","","class","p-l-0",4,"matCellDef"],["matColumnDef","rut"],["matColumnDef","razonSocial"],["matColumnDef","sobrePrecio"],["matColumnDef","valorPorLocal"],["matColumnDef","logo"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14","p-l-0"],["mat-cell","",1,"p-l-0"],["alt","Logo","height","60px",3,"src"],[1,"image-not-found"],["mat-icon-button","","matTooltipPosition","above","color","primary",3,"click","matTooltip"],["mat-icon-button","","matTooltipPosition","above","color","warn",3,"click","matTooltip"],["mat-icon-button","","color","primary","matTooltipPosition","above",3,"matTooltip"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","3",1,"mat-cell"]],template:function(o,n){if(1&o){const r=e.RV6();e.j41(0,"mat-card",1)(1,"mat-card-content",2)(2,"div",3)(3,"div",4)(4,"button",5),e.bIt("click",function(){return e.eBV(r),e.Njj(n.openCrearClienteModal())}),e.EFF(5,"Nuevo Cliente"),e.k0s()(),e.j41(6,"div",4)(7,"mat-form-field",6)(8,"input",7,0),e.bIt("keyup",function(a){return e.eBV(r),e.Njj(n.applyFilter(a))}),e.k0s()()()(),e.j41(10,"div",8)(11,"table",9),e.qex(12,10),e.DNE(13,V,2,0,"th",11)(14,G,2,1,"td",12),e.bVm(),e.qex(15,13),e.DNE(16,w,2,0,"th",11)(17,X,2,1,"td",12),e.bVm(),e.qex(18,14),e.DNE(19,B,2,0,"th",11)(20,Y,2,1,"td",12),e.bVm(),e.qex(21,15),e.DNE(22,U,2,0,"th",11)(23,z,2,1,"td",12),e.bVm(),e.qex(24,16),e.DNE(25,A,2,0,"th",11)(26,J,2,1,"td",12),e.bVm(),e.qex(27,17),e.DNE(28,q,2,0,"th",11)(29,W,3,1,"td",12),e.bVm(),e.qex(30,18),e.DNE(31,Z,2,0,"th",11)(32,K,16,5,"td",12),e.bVm(),e.DNE(33,ee,1,0,"tr",19)(34,te,1,0,"tr",20)(35,ie,3,0,"tr",21),e.k0s()()()()}2&o&&(e.R7$(11),e.Y8G("dataSource",n.dataSource),e.R7$(22),e.Y8G("matHeaderRowDef",n.displayedColumns),e.R7$(),e.Y8G("matRowDefColumns",n.displayedColumns))},dependencies:[p.tP,p.Zl,p.tL,p.ji,p.cC,p.YV,p.iL,p.KS,p.$R,p.YZ,p.NB,p.ky,S.Ou,x.NQ,F.fS,F.fg,f.rl,f.RG,u.RN,u.m2,h.An,g.$z,h.m_,g.Hl,g.iY,T.uc,T.oV],styles:[".image-not-found[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:5px;padding:10px;color:#ccc;font-size:14px}"]})}return i})();var l=m(9417),I=m(6600),j=m(2798),R=m(390),$=m(1643);const oe=(i,s)=>s.id;function re(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1,"El nombre es requerido"),e.k0s())}function se(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1,"El RUT es requerido"),e.k0s())}function ce(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1,"La raz\xf3n social es requerida"),e.k0s())}function ae(i,s){if(1&i&&(e.j41(0,"mat-option",14),e.EFF(1),e.k0s()),2&i){const t=s.$implicit;e.Y8G("value",t.id),e.R7$(),e.JRh(t.nombre)}}function le(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1,"El sobreprecio es requerido"),e.k0s())}function me(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1,"El valor por local es requerido"),e.k0s())}function de(i,s){if(1&i&&(e.j41(0,"div",17),e.nrm(1,"img",23),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("src",t.imagePreview,e.B4B)}}function pe(i,s){if(1&i){const t=e.RV6();e.j41(0,"div",24),e.bIt("click",function(){e.eBV(t),e.XpG();const n=e.sdS(63);return e.Njj(n.click())})("dragover",function(n){e.eBV(t);const r=e.XpG();return e.Njj(r.onDragOver(n))})("drop",function(n){e.eBV(t);const r=e.XpG();return e.Njj(r.onDrop(n))}),e.j41(1,"p"),e.EFF(2,"Haz clic para seleccionar"),e.k0s(),e.j41(3,"p"),e.EFF(4,"La imagen debe ser de 180 x 180 pixeles "),e.k0s()()}}let ue=(()=>{class i{constructor(t,o,n,r,c){this.clienteService=t,this.router=o,this.fb=n,this.uploadDataService=r,this.tipoServicioService=c,this.imagePreview=null,this.fileName="",this.imageBase64=null,this.urlImage=null,this.tipoServicioForm=new l.MJ(""),this.tipoServicioList=[]}ngOnInit(){this.clienteForm=this.fb.group({nombre:["",l.k0.required],logo:[""],rut:["",l.k0.required],razonSocial:["",l.k0.required],sobrePrecio:["",l.k0.required],valorPorLocal:["",l.k0.required],tipoServicio:[""]}),this.getTipoServicio()}onFileSelected(t){const o=t.target;if(o.files&&o.files[0]){const n=new FormData;n.append("file",o.files[0]),this.uploadDataService.uploadFile(n,"clientes").subscribe(a=>{this.urlImage=a.url});const r=o.files[0];this.fileName=r.name;const c=new FileReader;c.onload=()=>{this.imagePreview=c.result,this.imageBase64=c.result},c.readAsDataURL(r)}}getTipoServicio(){this.tipoServicioService.findAll().subscribe(t=>{this.tipoServicioList=t,console.log(this.tipoServicioList)})}submit(){this.clienteForm.value.logo=this.urlImage,this.clienteForm.value.tipoServicio=this.tipoServicioForm.value,this.clienteService.createCliente(this.clienteForm.value).subscribe(t=>{this.router.navigate(["/mantenedores/clientes"])})}onDragOver(t){t.preventDefault()}onDrop(t){t.preventDefault();const o=t.dataTransfer?.files;o&&o.length>0&&this.onFileSelected({target:{files:o}})}volver(){this.router.navigate(["/mantenedores/clientes"])}onTipoServicioChange(t){console.log("Toppings seleccionados:",t.value)}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(v.T),e.rXU(_.Ix),e.rXU(l.ok),e.rXU(R.l),e.rXU($.Q))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["app-crear-cliente"]],standalone:!0,features:[e.aNF],decls:72,vars:10,consts:[["fileInput",""],[1,"cardWithShadow"],[1,"p-24"],[3,"formGroup"],[1,"row"],[1,"col-lg-6","col-sm-6"],[1,"col-sm-4","d-flex","align-items-center","justify-content-end"],[1,"mat-subtitle-2","f-w-600","d-block","m-b-24"],[1,"col-sm-8"],["appearance","outline",1,"w-100"],["formControlName","nombre","matInput","","placeholder","Cliente de ejemplo"],["formControlName","rut","matInput","","placeholder","11.111.111-1"],["formControlName","razonSocial","matInput","","placeholder","Raz\xf3n social de ejemplo"],["multiple","",3,"selectionChange","formControl"],[3,"value"],["formControlName","sobrePrecio","matInput","","placeholder","10000"],["formControlName","valorPorLocal","matInput","","placeholder","10000"],[1,"image-box"],[1,"drop-area"],["type","file","accept","image/*",2,"display","none",3,"change"],[1,"col-sm-12","text-right","m-t-16"],["mat-flat-button","","color","primary",3,"click","disabled"],["mat-button","","color","warn",3,"click"],["loading","lazy","alt","Vista previa del logo",1,"img-preview",3,"src"],[1,"drop-area",3,"click","dragover","drop"]],template:function(o,n){if(1&o){const r=e.RV6();e.j41(0,"mat-card",1)(1,"mat-card-content",2)(2,"form",3)(3,"div",4)(4,"div",5)(5,"div",4)(6,"div",6)(7,"mat-label",7),e.EFF(8,"Nombre"),e.k0s()(),e.j41(9,"div",8)(10,"mat-form-field",9),e.nrm(11,"input",10),e.DNE(12,re,2,0,"mat-error"),e.k0s()()(),e.j41(13,"div",4)(14,"div",6)(15,"mat-label",7),e.EFF(16,"Rut"),e.k0s()(),e.j41(17,"div",8)(18,"mat-form-field",9),e.nrm(19,"input",11),e.DNE(20,se,2,0,"mat-error"),e.k0s()()(),e.j41(21,"div",4)(22,"div",6)(23,"mat-label",7),e.EFF(24,"Razon Social"),e.k0s()(),e.j41(25,"div",8)(26,"mat-form-field",9),e.nrm(27,"input",12),e.DNE(28,ce,2,0,"mat-error"),e.k0s()()(),e.j41(29,"div",4)(30,"div",6)(31,"mat-label",7),e.EFF(32,"Tipo de Servicio"),e.k0s()(),e.j41(33,"div",8)(34,"mat-form-field",9)(35,"mat-select",13),e.bIt("selectionChange",function(a){return e.eBV(r),e.Njj(n.onTipoServicioChange(a))}),e.Z7z(36,ae,2,2,"mat-option",14,oe),e.k0s()()()()(),e.j41(38,"div",5)(39,"div",4)(40,"div",6)(41,"mat-label",7),e.EFF(42,"Sobreprecio %"),e.k0s()(),e.j41(43,"div",8)(44,"mat-form-field",9),e.nrm(45,"input",15),e.DNE(46,le,2,0,"mat-error"),e.k0s()()(),e.j41(47,"div",4)(48,"div",6)(49,"mat-label",7),e.EFF(50,"Valor por Local"),e.k0s()(),e.j41(51,"div",8)(52,"mat-form-field",9),e.nrm(53,"input",16),e.DNE(54,me,2,0,"mat-error"),e.k0s()()(),e.j41(55,"div",4)(56,"div",6)(57,"mat-label",7),e.EFF(58,"Logo"),e.k0s()(),e.j41(59,"div",8),e.DNE(60,de,2,1,"div",17)(61,pe,5,0,"div",18),e.j41(62,"input",19,0),e.bIt("change",function(a){return e.eBV(r),e.Njj(n.onFileSelected(a))}),e.k0s(),e.j41(64,"span"),e.EFF(65),e.k0s()()()()(),e.j41(66,"div",4)(67,"div",20)(68,"button",21),e.bIt("click",function(){return e.eBV(r),e.Njj(n.submit())}),e.EFF(69,"Crear Cliente"),e.k0s(),e.j41(70,"button",22),e.bIt("click",function(){return e.eBV(r),e.Njj(n.volver())}),e.EFF(71,"Volver"),e.k0s()()()()()()}if(2&o){let r,c,a,d,b;e.R7$(2),e.Y8G("formGroup",n.clienteForm),e.R7$(10),e.vxM(null!=(r=n.clienteForm.get("nombre"))&&r.hasError("required")?12:-1),e.R7$(8),e.vxM(null!=(c=n.clienteForm.get("rut"))&&c.hasError("required")?20:-1),e.R7$(8),e.vxM(null!=(a=n.clienteForm.get("razonSocial"))&&a.hasError("required")?28:-1),e.R7$(7),e.Y8G("formControl",n.tipoServicioForm),e.R7$(),e.Dyx(n.tipoServicioList),e.R7$(10),e.vxM(null!=(d=n.clienteForm.get("sobrePrecio"))&&d.hasError("required")?46:-1),e.R7$(8),e.vxM(null!=(b=n.clienteForm.get("valorPorLocal"))&&b.hasError("required")?54:-1),e.R7$(6),e.vxM(n.imagePreview?60:61),e.R7$(5),e.JRh(n.fileName),e.R7$(3),e.Y8G("disabled",n.clienteForm.invalid)}},dependencies:[u.RN,f.RG,f.rl,f.nJ,f.TL,l.X1,l.qT,l.me,l.BC,l.cb,l.l_,l.j4,l.JD,u.m2,F.fg,g.$z,j.Ve,j.VO,I.wT,I.Sy],styles:[".text-right[_ngcontent-%COMP%]{text-align:right}.m-t-16[_ngcontent-%COMP%]{margin-top:16px}.image-box[_ngcontent-%COMP%]{width:180px;height:180px;border:1px solid #ccc;border-radius:5px}.img-preview[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.drop-area[_ngcontent-%COMP%]{border:2px dashed #ccc;padding:20px;text-align:center;cursor:pointer;background-color:#f9f9f9}.drop-area[_ngcontent-%COMP%]:hover{background-color:#e9e9e9}"]})}return i})();const fe=(i,s)=>s.id;function ge(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1,"El nombre es requerido"),e.k0s())}function _e(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1,"El RUT es requerido"),e.k0s())}function he(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1,"La raz\xf3n social es requerida"),e.k0s())}function Ce(i,s){if(1&i&&(e.j41(0,"mat-option",14),e.EFF(1),e.k0s()),2&i){const t=s.$implicit;e.Y8G("value",t.id),e.R7$(),e.JRh(t.nombre)}}function ve(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1,"El sobreprecio es requerido"),e.k0s())}function be(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1,"Debe ser un n\xfamero v\xe1lido"),e.k0s())}function Fe(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1,"El valor por local es requerido"),e.k0s())}function ke(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1,"Debe ser un n\xfamero entero"),e.k0s())}let Ie=(()=>{class i{constructor(t,o,n,r,c,a){this.clienteService=t,this.router=o,this.fb=n,this.route=r,this.uploadDataService=c,this.tipoServicioService=a,this.imagePreview=null,this.fileName="",this.imageBase64=null,this.urlImage=null,this.isLoading=!1,this.tipoServicioForm=new l.MJ(""),this.tipoServicioList=[]}ngOnInit(){this.getTipoServicio(),this.clienteForm=this.fb.group({nombre:["",l.k0.required],rut:["",l.k0.required],razonSocial:["",l.k0.required],logo:[""],sobreprecio:["",l.k0.required],valorPorLocal:["",l.k0.required]}),this.clienteService.getCliente(this.route.snapshot.params.id).subscribe(t=>{this.cliente=t,this.clienteForm.patchValue(t),this.urlImage=t.logo,t.tipoServicio&&t.tipoServicio.length>0&&this.tipoServicioForm.setValue(t.tipoServicio.map(o=>o.id))})}getTipoServicio(){this.tipoServicioService.findAll().subscribe(t=>{this.tipoServicioList=t})}onTipoServicioChange(t){console.log("Tipos de servicio seleccionados:",t.value)}onSubmit(){if(this.clienteForm.valid){const t={...this.clienteForm.value,logo:this.urlImage||this.cliente.logo,tipoServicio:this.tipoServicioForm.value};this.clienteService.updateCliente(this.route.snapshot.params.id,t).subscribe({next:()=>{this.router.navigate(["/mantenedores/clientes"])},error:o=>{console.error("Error al actualizar el cliente:",o)}})}}onFileSelected(t){const o=t.target;if(o.files&&o.files[0]){const n=new FormData;n.append("file",o.files[0]),this.uploadDataService.uploadFile(n,"clientes").subscribe(a=>{this.urlImage=a.url});const r=o.files[0];this.fileName=r.name;const c=new FileReader;c.onload=()=>{this.imagePreview=c.result,this.imageBase64=c.result,this.isLoading=!1},c.readAsDataURL(r)}}irListaDeInspecciones(){this.router.navigate(["/mantenedores/clientes/lista-de-inspecciones",this.cliente.id])}volver(){this.router.navigate(["/mantenedores/clientes"])}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(v.T),e.rXU(_.Ix),e.rXU(l.ok),e.rXU(_.nX),e.rXU(R.l),e.rXU($.Q))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["app-editar-clientes"]],standalone:!0,features:[e.aNF],decls:86,vars:12,consts:[["fileInput",""],[1,"cardWithShadow"],[1,"p-24"],[3,"ngSubmit","formGroup"],[1,"row"],[1,"col-lg-6","col-sm-6"],[1,"col-sm-4","d-flex","align-items-center","justify-content-end"],[1,"mat-subtitle-2","f-w-600","d-block","m-b-24"],[1,"col-sm-8"],["appearance","outline",1,"w-100"],["formControlName","nombre","matInput","","placeholder","John Deo"],["formControlName","rut","matInput","","placeholder","150 Foot Ring Road"],["formControlName","razonSocial","matInput","","placeholder","Jackson"],["multiple","",3,"selectionChange","formControl"],[3,"value"],["mat-flat-button","","color","primary",3,"click"],["formControlName","sobreprecio","matInput","","placeholder","630002"],["formControlName","valorPorLocal","matInput","","placeholder","Nr. wall street"],["type","button","mat-button","","color","primary",3,"click"],["type","file","accept","image/*",2,"display","none",3,"change"],["width","100","loading","lazy","alt","Vista previa del logo",1,"img-preview",3,"src"],[1,"col-sm-12","text-right","m-t-16"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],["mat-button","","color","warn",3,"click"]],template:function(o,n){if(1&o){const r=e.RV6();e.j41(0,"mat-card",1)(1,"mat-card-content",2)(2,"form",3),e.bIt("ngSubmit",function(){return e.eBV(r),e.Njj(n.onSubmit())}),e.j41(3,"div",4)(4,"div",5)(5,"div",4)(6,"div",6)(7,"mat-label",7),e.EFF(8,"Nombre"),e.k0s()(),e.j41(9,"div",8)(10,"mat-form-field",9),e.nrm(11,"input",10),e.DNE(12,ge,2,0,"mat-error"),e.k0s()()(),e.j41(13,"div",4)(14,"div",6)(15,"mat-label",7),e.EFF(16,"Rut"),e.k0s()(),e.j41(17,"div",8)(18,"mat-form-field",9),e.nrm(19,"input",11),e.DNE(20,_e,2,0,"mat-error"),e.k0s()()(),e.j41(21,"div",4)(22,"div",6)(23,"mat-label",7),e.EFF(24,"Razon Social"),e.k0s()(),e.j41(25,"div",8)(26,"mat-form-field",9),e.nrm(27,"input",12),e.DNE(28,he,2,0,"mat-error"),e.k0s()()(),e.j41(29,"div",4)(30,"div",6)(31,"mat-label",7),e.EFF(32,"Tipo de Servicio"),e.k0s()(),e.j41(33,"div",8)(34,"mat-form-field",9)(35,"mat-select",13),e.bIt("selectionChange",function(a){return e.eBV(r),e.Njj(n.onTipoServicioChange(a))}),e.Z7z(36,Ce,2,2,"mat-option",14,fe),e.k0s()()()(),e.j41(38,"div",4)(39,"div",6)(40,"mat-label",7),e.EFF(41,"Lista de Inspecciones"),e.k0s()(),e.j41(42,"div",8)(43,"button",15),e.bIt("click",function(){return e.eBV(r),e.Njj(n.irListaDeInspecciones())}),e.EFF(44,"Ir a lista de inspecciones"),e.k0s()()()(),e.j41(45,"div",5)(46,"div",4)(47,"div",6)(48,"mat-label",7),e.EFF(49,"Sobreprecio %"),e.k0s()(),e.j41(50,"div",8)(51,"mat-form-field",9),e.nrm(52,"input",16),e.DNE(53,ve,2,0,"mat-error")(54,be,2,0,"mat-error"),e.k0s()()(),e.j41(55,"div",4)(56,"div",6)(57,"mat-label",7),e.EFF(58,"Valor por Local"),e.k0s()(),e.j41(59,"div",8)(60,"mat-form-field",9),e.nrm(61,"input",17),e.DNE(62,Fe,2,0,"mat-error")(63,ke,2,0,"mat-error"),e.k0s()()(),e.j41(64,"div",4)(65,"div",6)(66,"mat-label",7),e.EFF(67,"Logo"),e.k0s()(),e.j41(68,"div",8)(69,"button",18),e.bIt("click",function(){e.eBV(r);const a=e.sdS(72);return e.Njj(a.click())}),e.EFF(70,"Seleccionar archivo"),e.k0s(),e.j41(71,"input",19,0),e.bIt("change",function(a){return e.eBV(r),e.Njj(n.onFileSelected(a))}),e.k0s(),e.j41(73,"span"),e.EFF(74),e.k0s(),e.nrm(75,"img",20),e.k0s()(),e.j41(76,"div",4)(77,"div",6)(78,"mat-label",7),e.EFF(79,"Tipo de Servicio"),e.k0s()()()()(),e.j41(80,"div",4)(81,"div",21)(82,"button",22),e.EFF(83,"Editar Cliente"),e.k0s(),e.j41(84,"button",23),e.bIt("click",function(){return e.eBV(r),e.Njj(n.volver())}),e.EFF(85,"Volver"),e.k0s()()()()()()}if(2&o){let r,c,a,d,b,M,N;e.R7$(2),e.Y8G("formGroup",n.clienteForm),e.R7$(10),e.vxM(null!=(r=n.clienteForm.get("nombre"))&&r.hasError("required")?12:-1),e.R7$(8),e.vxM(null!=(c=n.clienteForm.get("rut"))&&c.hasError("required")?20:-1),e.R7$(8),e.vxM(null!=(a=n.clienteForm.get("razonSocial"))&&a.hasError("required")?28:-1),e.R7$(7),e.Y8G("formControl",n.tipoServicioForm),e.R7$(),e.Dyx(n.tipoServicioList),e.R7$(17),e.vxM(null!=(d=n.clienteForm.get("sobreprecio"))&&d.hasError("required")?53:-1),e.R7$(),e.vxM(null!=(b=n.clienteForm.get("sobreprecio"))&&b.hasError("pattern")?54:-1),e.R7$(8),e.vxM(null!=(M=n.clienteForm.get("valorPorLocal"))&&M.hasError("required")?62:-1),e.R7$(),e.vxM(null!=(N=n.clienteForm.get("valorPorLocal"))&&N.hasError("pattern")?63:-1),e.R7$(11),e.JRh(n.fileName||(null==n.cliente||null==n.cliente.logo?null:n.cliente.logo.split("-").pop())),e.R7$(),e.Y8G("src",n.imagePreview||(null==n.cliente?null:n.cliente.logo),e.B4B),e.R7$(7),e.Y8G("disabled",n.clienteForm.invalid)}},dependencies:[u.RN,f.RG,f.rl,f.nJ,f.TL,l.X1,l.qT,l.me,l.BC,l.cb,l.l_,l.j4,l.JD,u.m2,F.fg,g.$z,j.Ve,j.VO,I.wT,I.Sy]})}return i})();var C=m(177),O=m(2765),P=m(7316);function je(i,s){1&i&&(e.j41(0,"div",12)(1,"p"),e.EFF(2,"Cargando..."),e.k0s()())}function Ee(i,s){if(1&i&&(e.j41(0,"div",13),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.SpI(" ",t.error," ")}}function Se(i,s){if(1&i){const t=e.RV6();e.j41(0,"div",28)(1,"div",29)(2,"div",30)(3,"span",31),e.EFF(4),e.k0s(),e.j41(5,"span",32),e.EFF(6),e.k0s()(),e.j41(7,"mat-checkbox",26),e.bIt("change",function(n){const r=e.eBV(t).$implicit,c=e.XpG().$implicit,a=e.XpG().$implicit,d=e.XpG();return e.Njj(d.onSubitemChange(n,a,c,r))}),e.k0s()()()}if(2&i){const t=s.$implicit,o=s.index,n=e.XpG().index,r=e.XpG().index,c=e.XpG();e.R7$(4),e.E5c("",r+1,".",n+1,".",o+1,""),e.R7$(2),e.JRh(t.name),e.R7$(),e.Y8G("checked",c.isSubitemSelected(t))}}function xe(i,s){if(1&i){const t=e.RV6();e.j41(0,"div",21)(1,"div",22)(2,"div",23)(3,"span",24),e.EFF(4),e.k0s(),e.j41(5,"span",25),e.EFF(6),e.k0s()(),e.j41(7,"mat-checkbox",26),e.bIt("change",function(n){const r=e.eBV(t).$implicit,c=e.XpG().$implicit,a=e.XpG();return e.Njj(a.onItemChange(n,c,r))}),e.k0s()(),e.DNE(8,Se,8,5,"div",27),e.k0s()}if(2&i){const t=s.$implicit,o=s.index,n=e.XpG().index,r=e.XpG();e.R7$(4),e.Lme("",n+1,".",o+1,""),e.R7$(2),e.JRh(t.name),e.R7$(),e.Y8G("checked",r.isItemSelected(t)),e.R7$(),e.Y8G("ngForOf",t.subItems)}}function Te(i,s){if(1&i){const t=e.RV6();e.j41(0,"div",14)(1,"div",15)(2,"div",16)(3,"span",17),e.EFF(4),e.k0s(),e.j41(5,"span",18),e.EFF(6),e.k0s()(),e.j41(7,"mat-checkbox",19),e.bIt("change",function(n){const r=e.eBV(t).$implicit,c=e.XpG();return e.Njj(c.onSeccionChange(n,r))}),e.k0s()(),e.DNE(8,xe,9,5,"div",20),e.k0s()}if(2&i){const t=s.$implicit,o=s.index,n=e.XpG();e.R7$(4),e.SpI("",o+1,"."),e.R7$(2),e.JRh(t.name),e.R7$(),e.Y8G("checked",n.isSeccionSelected(t)),e.R7$(),e.Y8G("ngForOf",t.items)}}function Re(i,s){if(1&i){const t=e.RV6();e.j41(0,"div",33)(1,"button",34),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.volver())}),e.j41(2,"mat-icon"),e.EFF(3,"arrow_back"),e.k0s(),e.EFF(4," Volver "),e.k0s()()}}function $e(i,s){if(1&i){const t=e.RV6();e.j41(0,"div",35)(1,"div",36),e.nrm(2,"i",37),e.k0s(),e.j41(3,"h3"),e.EFF(4,"No hay secciones de inspecci\xf3n"),e.k0s(),e.j41(5,"p",38),e.EFF(6,"No se encontraron secciones de inspecci\xf3n para este cliente"),e.k0s(),e.j41(7,"button",39),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.volver())}),e.j41(8,"mat-icon"),e.EFF(9,"arrow_back"),e.k0s(),e.EFF(10," Volver "),e.k0s()()}}let Oe=(()=>{class i{constructor(t,o,n,r){this.route=t,this.clientesService=o,this.inspectionService=n,this.router=r,this.sections=[],this.listaInspeccion=[],this.clienteId="",this.isLoading=!1,this.error=null,this.cliente=[],this.checkboxColor="primary"}ngOnInit(){this.clienteId=this.route.snapshot.params.id,this.loadSections(),this.cargarListaInspeccion(),this.cargarSeccionesGuardadas()}loadSections(){this.isLoading=!0,this.error=null,this.inspectionService.getSections().subscribe({next:t=>{this.sections=t,this.isLoading=!1},error:t=>{console.error("Error loading sections:",t),this.error="Error al cargar las secciones",this.isLoading=!1}})}cargarListaInspeccion(){this.clientesService.getCliente(this.clienteId).subscribe(t=>{this.cliente=t,t.listaInspeccion&&(this.listaInspeccion=t.listaInspeccion)})}volver(){this.router.navigate(["/mantenedores/clientes/editar",this.clienteId])}isSeccionSelected(t){return this.listaInspeccion.some(o=>o.id===t.id)}onSeccionChange(t,o){console.log("Secci\xf3n seleccionada:",{checked:t.checked,seccion:o,nombre:o.name,items:o.items}),t.checked?this.isSeccionSelected(o)||this.listaInspeccion.push(o):this.listaInspeccion=this.listaInspeccion.filter(n=>n.id!==o.id),localStorage.setItem(`secciones_cliente_${this.clienteId}`,JSON.stringify(this.listaInspeccion))}guardarCambios(){this.clientesService.updateCliente(this.clienteId,{listaInspeccion:this.listaInspeccion}).subscribe({next:()=>{console.log("Lista de inspecci\xf3n actualizada")},error:o=>{console.error("Error al actualizar la lista de inspecci\xf3n:",o)}})}cargarSeccionesGuardadas(){const t=localStorage.getItem(`secciones_cliente_${this.clienteId}`);t&&(this.listaInspeccion=JSON.parse(t))}isItemSelected(t){return this.listaInspeccion.some(o=>o.items?.some(n=>n.id===t.id))}isSubitemSelected(t){return this.listaInspeccion.some(o=>o.items?.some(n=>n.subItems?.some(r=>r.id===t.id)))}onItemChange(t,o,n){if(console.log("Item seleccionado:",{checked:t.checked,seccion:o.name,item:n.name}),t.checked)if(this.isSeccionSelected(o)){const r=this.listaInspeccion.find(c=>c.id===o.id);r&&!r.items.some(c=>c.id===n.id)&&r.items.push(n)}else this.listaInspeccion.push({...o,items:[n]});else this.listaInspeccion=this.listaInspeccion.map(r=>({...r,items:r.items.filter(c=>c.id!==n.id)}));this.guardarEnLocalStorage()}onSubitemChange(t,o,n,r){if(console.log("Subitem seleccionado:",{checked:t.checked,seccion:o.name,item:n.name,subitem:r.name}),t.checked){if(this.isSeccionSelected(o)){const c=this.listaInspeccion.find(a=>a.id===o.id);if(c){let a=c.items.find(d=>d.id===n.id);a||(a={...n,subItems:[]},c.items.push(a)),a.subItems.some(d=>d.id===r.id)||a.subItems.push(r)}}else this.listaInspeccion.push({...o,items:[{...n,subItems:[r]}]});r.comentarios="",r.repuestos=[]}else this.listaInspeccion=this.listaInspeccion.map(c=>({...c,items:c.items.map(a=>({...a,subItems:a.subItems.filter(d=>d.id!==r.id)}))}));this.guardarEnLocalStorage()}guardarEnLocalStorage(){localStorage.setItem(`secciones_cliente_${this.clienteId}`,JSON.stringify(this.listaInspeccion))}isSubitemInLocalStorage(t){const o=localStorage.getItem(`secciones_cliente_${this.clienteId}`);return!!o&&JSON.parse(o).some(r=>r.items?.some(c=>c.subItems?.some(a=>a.id===t.id)))}getSubitemFromStorage(t){const o=localStorage.getItem(`secciones_cliente_${this.clienteId}`);if(!o)return t;const n=JSON.parse(o);for(const r of n)for(const c of r.items||[]){const a=(c.subItems||[]).find(d=>d.id===t.id);if(a)return a.comentarios||(a.comentarios=""),a.repuestos||(a.repuestos=[]),a}return t}guardarListaInspeccion(){this.isLoading=!0,this.error=null,this.clientesService.updateListaInspeccion(this.clienteId,this.listaInspeccion).subscribe({next:o=>{console.log("Lista de inspecci\xf3n guardada:",o),this.guardarEnLocalStorage(),this.isLoading=!1,k().fire("\xc9xito","Lista de inspecci\xf3n guardada correctamente","success"),this.volver()},error:o=>{console.error("Error al guardar la lista:",o),this.error="Error al guardar la lista de inspecci\xf3n",this.isLoading=!1,k().fire("Error","No se pudo guardar la lista de inspecci\xf3n","error")}})}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(_.nX),e.rXU(v.T),e.rXU(P.I),e.rXU(_.Ix))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["app-cliente-lista-de-inspecciones"]],standalone:!0,features:[e.aNF],decls:17,vars:7,consts:[[1,"cardWithShadow"],[1,"p-24"],[1,"container"],[1,"header-actions"],[1,"d-flex","gap-2"],["mat-raised-button","","color","primary",3,"click","disabled"],["class","text-center",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"lista-inspeccion"],["class","seccion",4,"ngFor","ngForOf"],["class","d-flex justify-content-center mt-4",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"text-center"],[1,"alert","alert-danger"],[1,"seccion"],[1,"seccion-header"],[1,"seccion-content"],[1,"seccion-numero"],[1,"seccion-titulo"],["color","primary",3,"change","checked"],["class","item",4,"ngFor","ngForOf"],[1,"item"],[1,"item-header"],[1,"item-content"],[1,"item-numero"],[1,"item-titulo"],[1,"mat-checkbox-green",3,"change","checked"],["class","subitem",4,"ngFor","ngForOf"],[1,"subitem"],[1,"subitem-header"],[1,"subitem-content"],[1,"subitem-numero"],[1,"subitem-titulo"],[1,"d-flex","justify-content-center","mt-4"],["mat-raised-button","","color","basic",3,"click"],[1,"empty-state"],[1,"icon-container"],[1,"list-icon"],[1,"empty-state-message"],["mat-raised-button","","color","basic",1,"mt-3",3,"click"]],template:function(o,n){1&o&&(e.j41(0,"mat-card",0)(1,"mat-card-content",1)(2,"div",2)(3,"div",3)(4,"h2"),e.EFF(5),e.k0s(),e.j41(6,"div",4)(7,"button",5),e.bIt("click",function(){return n.guardarListaInspeccion()}),e.j41(8,"mat-icon"),e.EFF(9,"save"),e.k0s(),e.EFF(10," Guardar Lista de Inspecci\xf3n "),e.k0s()()(),e.DNE(11,je,3,0,"div",6)(12,Ee,2,1,"div",7),e.j41(13,"div",8),e.DNE(14,Te,9,4,"div",9)(15,Re,5,0,"div",10),e.k0s()(),e.DNE(16,$e,11,0,"div",11),e.k0s()()),2&o&&(e.R7$(5),e.SpI("Lista de Inspecci\xf3n del Cliente ",n.cliente.nombre,""),e.R7$(2),e.Y8G("disabled",n.isLoading||!n.sections||0===n.sections.length),e.R7$(4),e.Y8G("ngIf",n.isLoading),e.R7$(),e.Y8G("ngIf",n.error),e.R7$(2),e.Y8G("ngForOf",n.sections),e.R7$(),e.Y8G("ngIf",n.sections&&n.sections.length>0),e.R7$(),e.Y8G("ngIf",!n.sections||0===n.sections.length))},dependencies:[C.MD,C.Sq,C.bT,u.Hu,u.RN,u.m2,h.m_,h.An,g.Hl,g.$z,O.g7,O.So],styles:[".container[_ngcontent-%COMP%]{padding:20px}.seccion-container[_ngcontent-%COMP%]{margin-bottom:20px}.item-container[_ngcontent-%COMP%]{margin-left:20px;margin-bottom:15px}.subitem-container[_ngcontent-%COMP%]{margin-left:20px;margin-bottom:10px}.seccion-card[_ngcontent-%COMP%]{background-color:#f8f9fa}.item-card[_ngcontent-%COMP%]{background-color:#fff}.subitem-card[_ngcontent-%COMP%]{background-color:#f8f9fa}.mb-2[_ngcontent-%COMP%]{margin-bottom:.5rem}.mb-3[_ngcontent-%COMP%]{margin-bottom:1rem}.mb-4[_ngcontent-%COMP%]{margin-bottom:1.5rem}.ml-4[_ngcontent-%COMP%]{margin-left:1.5rem}.d-flex[_ngcontent-%COMP%]{display:flex}.justify-content-between[_ngcontent-%COMP%]{justify-content:space-between}.align-items-center[_ngcontent-%COMP%]{align-items:center}.seccion[_ngcontent-%COMP%]{margin-bottom:20px}.seccion-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;font-weight:700;font-size:1.1em;padding:5px 0}.seccion-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.item[_ngcontent-%COMP%]{margin-left:20px;margin-bottom:10px}.item-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:3px 0}.subitem[_ngcontent-%COMP%]{margin-left:40px}.subitem-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:2px 0}.seccion-numero[_ngcontent-%COMP%], .item-numero[_ngcontent-%COMP%], .subitem-numero[_ngcontent-%COMP%]{color:#666}  .mat-checkbox-green.mat-mdc-checkbox{--mdc-checkbox-selected-checkmark-color: #ffffff;--mdc-checkbox-selected-focus-icon-color: #4CAF50;--mdc-checkbox-selected-hover-icon-color: #4CAF50;--mdc-checkbox-selected-icon-color: #4CAF50;--mdc-checkbox-selected-pressed-icon-color: #4CAF50;--mdc-checkbox-unselected-focus-icon-color: #4CAF50;--mdc-checkbox-unselected-hover-icon-color: #4CAF50;--mdc-checkbox-unselected-icon-color: #4CAF50;--mdc-checkbox-unselected-pressed-icon-color: #4CAF50;--mdc-checkbox-selected-focus-state-layer-color: #4CAF50;--mdc-checkbox-selected-hover-state-layer-color: #4CAF50;--mdc-checkbox-selected-pressed-state-layer-color: #4CAF50}.subitem-details[_ngcontent-%COMP%]{margin-left:40px;margin-top:10px;padding:10px;background-color:#f5f5f5;border-radius:4px}.comentarios-section[_ngcontent-%COMP%]{margin-bottom:15px}.full-width[_ngcontent-%COMP%]{width:100%}.repuestos-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 10px;color:#666}.repuestos-list[_ngcontent-%COMP%]{margin-bottom:10px}.repuesto-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:5px}.repuesto-input[_ngcontent-%COMP%]{flex:1}.header-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;background-color:#fff;border-radius:8px;border:1px solid #e0e0e0}.icon-container[_ngcontent-%COMP%]{margin-bottom:16px}.list-icon[_ngcontent-%COMP%]{font-size:48px;color:#757575}h3[_ngcontent-%COMP%]{color:#333;margin-bottom:8px}.empty-state-message[_ngcontent-%COMP%]{color:#666;text-align:center}"]})}return i})();var L=m(9183);function Pe(i,s){1&i&&(e.j41(0,"div",6),e.nrm(1,"mat-spinner",7),e.j41(2,"p"),e.EFF(3,"Cargando lista de inspecci\xf3n..."),e.k0s()())}function Le(i,s){if(1&i&&(e.j41(0,"li"),e.EFF(1),e.k0s()),2&i){const t=s.$implicit;e.AVh("deshabilitado",t.disabled),e.R7$(),e.SpI(" ",t.name," ")}}function Me(i,s){if(1&i&&(e.j41(0,"li"),e.EFF(1),e.j41(2,"ul",15),e.DNE(3,Le,2,3,"li",16),e.k0s()()),2&i){const t=s.$implicit;e.R7$(),e.SpI(" ",t.name," "),e.R7$(2),e.Y8G("ngForOf",t.subItems)}}function Ne(i,s){if(1&i&&(e.j41(0,"div",11)(1,"div",12),e.EFF(2),e.k0s(),e.j41(3,"ul",13),e.DNE(4,Me,4,2,"li",14),e.k0s()()),2&i){const t=s.$implicit;e.R7$(2),e.SpI(" ",t.name," "),e.R7$(2),e.Y8G("ngForOf",t.items)}}function ye(i,s){if(1&i){const t=e.RV6();e.j41(0,"div",17)(1,"button",18),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.volver())}),e.j41(2,"mat-icon"),e.EFF(3,"arrow_back"),e.k0s(),e.EFF(4," Volver "),e.k0s()()}}function De(i,s){if(1&i&&(e.j41(0,"div",8),e.DNE(1,Ne,5,2,"div",9)(2,ye,5,0,"div",10),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.sections),e.R7$(),e.Y8G("ngIf",t.tieneInspecciones)}}function Ve(i,s){if(1&i){const t=e.RV6();e.j41(0,"div",19)(1,"div",20),e.nrm(2,"i",21),e.k0s(),e.j41(3,"h3"),e.EFF(4,"No hay secciones de inspecci\xf3n"),e.k0s(),e.j41(5,"p",22),e.EFF(6,"No se encontraron secciones de inspecci\xf3n para este cliente"),e.k0s(),e.j41(7,"button",23),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.volver())}),e.j41(8,"mat-icon"),e.EFF(9,"arrow_back"),e.k0s(),e.EFF(10," Volver "),e.k0s()()}}const Ge=[{path:"",component:ne,data:{title:"Clientes"}},{path:"crear",component:ue,data:{title:"Crear Cliente"}},{path:"editar/:id",component:Ie,data:{title:"Editar Cliente"}},{path:"lista-de-inspecciones/:id",component:Oe,data:{title:"Lista de Inspecciones"}},{path:"ver-lista-inspeccion/:id",component:(()=>{class i{constructor(t,o,n,r){this.route=t,this.router=o,this.clientesService=n,this.inspectionService=r,this.sections=[],this.isLoading=!0,this.error=null}ngOnInit(){const t=this.route.snapshot.params.id;this.clientesService.getCliente(t).subscribe({next:o=>{this.cliente=o,this.cargarListaInspeccion(t)},error:o=>{this.error="Error al cargar los datos del cliente",this.isLoading=!1}})}get tieneInspecciones(){return this.sections&&this.sections.length>0}cargarListaInspeccion(t){this.clientesService.getCliente(t).subscribe(o=>{this.cliente=o,o.listaInspeccion&&(this.sections=o.listaInspeccion,this.isLoading=!1)})}volver(){this.router.navigate(["/mantenedores/clientes"])}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(_.nX),e.rXU(_.Ix),e.rXU(v.T),e.rXU(P.I))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["app-ver-lista-inspeccion"]],standalone:!0,features:[e.aNF],decls:8,vars:4,consts:[[1,"cardWithShadow"],[1,"p-24"],[1,"header","mb-4"],["class","text-center",4,"ngIf"],["class","lista-container",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"text-center"],["diameter","40"],[1,"lista-container"],["class","lista-seccion",4,"ngFor","ngForOf"],["class","text-center mt-4",4,"ngIf"],[1,"lista-seccion"],[1,"seccion-header"],[1,"lista-items"],[4,"ngFor","ngForOf"],[1,"lista-subitems"],[3,"deshabilitado",4,"ngFor","ngForOf"],[1,"text-center","mt-4"],["mat-raised-button","","color","primary",3,"click"],[1,"empty-state"],[1,"icon-container"],[1,"fas","fa-clipboard-list"],[1,"empty-state-message"],["mat-raised-button","","color","primary",1,"mt-3",3,"click"]],template:function(o,n){1&o&&(e.j41(0,"mat-card",0)(1,"mat-card-content",1)(2,"div",2)(3,"h2"),e.EFF(4),e.k0s()(),e.DNE(5,Pe,4,0,"div",3)(6,De,3,2,"div",4)(7,Ve,11,0,"div",5),e.k0s()()),2&o&&(e.R7$(4),e.SpI("Lista de Inspecci\xf3n - ",null==n.cliente?null:n.cliente.nombre,""),e.R7$(),e.Y8G("ngIf",n.isLoading),e.R7$(),e.Y8G("ngIf",!n.isLoading),e.R7$(),e.Y8G("ngIf",!n.tieneInspecciones))},dependencies:[C.MD,C.Sq,C.bT,u.Hu,u.RN,u.m2,L.D6,L.LG,g.Hl,g.$z,h.m_,h.An],styles:['@charset "UTF-8";.lista-container[_ngcontent-%COMP%]{padding:1rem}.lista-seccion[_ngcontent-%COMP%]{margin-bottom:2rem}.lista-seccion[_ngcontent-%COMP%]   .seccion-header[_ngcontent-%COMP%]{background-color:#f0f2f5;padding:12px 16px;border-radius:6px;font-weight:500;color:#1a1f36;font-size:16px;margin-bottom:1rem}.lista-items[_ngcontent-%COMP%]{margin:0;padding-left:2rem;list-style:none}.lista-items[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;padding:8px 0;color:#1a1f36;font-weight:500}.lista-items[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"\\2022";position:absolute;left:-1rem;color:#3498db}.lista-subitems[_ngcontent-%COMP%]{margin:.5rem 0 .5rem 1rem;padding-left:1rem;list-style:none}.lista-subitems[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:4px 0;color:#4a5568;font-weight:400}.lista-subitems[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"-";color:#718096}.lista-subitems[_ngcontent-%COMP%]   li.deshabilitado[_ngcontent-%COMP%]{color:#a0aec0;text-decoration:line-through}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2d3748;font-size:1.5rem;font-weight:500;margin-bottom:1.5rem}.header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.text-center[_ngcontent-%COMP%]{text-align:center;padding:2rem}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;margin:20px;background-color:#fff;border-radius:8px;border:1px solid #e0e0e0}.empty-state[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]{margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px;color:#757575}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;margin-bottom:8px}.empty-state[_ngcontent-%COMP%]   .empty-state-message[_ngcontent-%COMP%]{color:#666;text-align:center}']})}return i})(),data:{title:"Lista de Inspecciones"}}]}}]);