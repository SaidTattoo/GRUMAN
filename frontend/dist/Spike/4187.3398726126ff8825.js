"use strict";(self.webpackChunkSpike=self.webpackChunkSpike||[]).push([[4187],{4187:(A,F,s)=>{s.r(F),s.d(F,{SECTORES_TRABAJO_ROUTES:()=>z});var C=s(177),u=s(8834),m=s(5596),p=s(9213),g=s(9115),l=s(9159),b=s(8887),e=s(3953),v=s(9220);const T=t=>["/mantenedores/sectores-trabajo/editar-default",t];function k(t,c){1&t&&(e.j41(0,"mat-header-cell"),e.EFF(1," Nombre "),e.k0s())}function R(t,c){if(1&t&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&t){const r=c.$implicit;e.R7$(),e.SpI(" ",r.nombre," ")}}function D(t,c){1&t&&(e.j41(0,"mat-header-cell"),e.EFF(1," Acciones "),e.k0s())}function y(t,c){if(1&t&&(e.j41(0,"mat-cell")(1,"button",13)(2,"mat-icon"),e.EFF(3,"edit"),e.k0s()()()),2&t){const r=c.$implicit;e.R7$(),e.Y8G("routerLink",e.eq3(1,T,r.id))}}function I(t,c){1&t&&e.nrm(0,"mat-header-row")}function $(t,c){1&t&&e.nrm(0,"mat-row")}let N=(()=>{class t{constructor(r){this.sectoresTrabajoService=r,this.dataSource=new l.I6([]),this.displayedColumns=["nombre","acciones"]}ngOnInit(){this.sectoresTrabajoService.getSectores().subscribe(r=>{this.dataSource=new l.I6(r)})}editarSector(r){}static#e=this.\u0275fac=function(n){return new(n||t)(e.rXU(v.Y))};static#t=this.\u0275cmp=e.VBU({type:t,selectors:[["app-sectores-trabajo"]],standalone:!0,features:[e.aNF],decls:21,vars:3,consts:[[1,"cardWithShadow"],[1,"p-24"],["mat-raised-button","","color","primary","routerLink","/mantenedores/sectores-trabajo/crear-sector"],["mat-raised-button","","color","primary","routerLink","/mantenedores/sectores-trabajo/crear-sector-default"],[1,"table-responsive","m-t-30"],[1,"info"],[1,"w-100","mat-elevation-z8",3,"dataSource"],["matColumnDef","nombre"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","acciones"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["mat-icon-button","","color","primary","matTooltip","Editar sector",3,"routerLink"]],template:function(n,o){1&n&&(e.j41(0,"mat-card",0)(1,"mat-card-content",1)(2,"button",2),e.EFF(3,"Crear Sector por local"),e.k0s(),e.j41(4,"button",3),e.EFF(5,"Crear Sector por defecto"),e.k0s(),e.j41(6,"div",4)(7,"div",5)(8,"mat-icon"),e.EFF(9,"info"),e.k0s(),e.j41(10,"span"),e.EFF(11,"Estos son sectores por default que se asignan al crear un nuevo local"),e.k0s()(),e.j41(12,"mat-table",6),e.qex(13,7),e.DNE(14,k,2,0,"mat-header-cell",8)(15,R,2,1,"mat-cell",9),e.bVm(),e.qex(16,10),e.DNE(17,D,2,0,"mat-header-cell",8)(18,y,4,3,"mat-cell",9),e.bVm(),e.DNE(19,I,1,0,"mat-header-row",11)(20,$,1,0,"mat-row",12),e.k0s()()()()),2&n&&(e.R7$(12),e.Y8G("dataSource",o.dataSource),e.R7$(7),e.Y8G("matHeaderRowDef",o.displayedColumns),e.R7$(),e.Y8G("matRowDefColumns",o.displayedColumns))},dependencies:[C.MD,m.Hu,m.RN,m.m2,p.m_,p.An,u.Hl,u.$z,u.iY,b.iI,b.Wk,g.Cn,l.tP,l.Zl,l.tL,l.ji,l.cC,l.YV,l.iL,l.KS,l.$R,l.YZ,l.NB],styles:[".info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;border:2px solid #a8cae6;padding:10px;border-radius:10px;color:#4398dd;background-color:#e2f0ff}"]})}return t})();var a=s(9417),d=s(3719),h=s(9631),j=s(2798),G=s(8032),f=s.n(G),Y=s(1357),U=s(8949),w=s(6600);const E=(t,c)=>c.id;function x(t,c){if(1&t&&(e.j41(0,"mat-option",7),e.EFF(1),e.k0s()),2&t){const r=c.$implicit;e.Y8G("value",r.id),e.R7$(),e.SpI(" ",r.nombre," ")}}function X(t,c){if(1&t&&(e.j41(0,"mat-option",7),e.EFF(1),e.k0s()),2&t){const r=c.$implicit;e.Y8G("value",r.id),e.R7$(),e.SpI(" ",r.direccion," ")}}let _=(()=>{class t{constructor(r,n,o,i,S){this.fb=r,this.clientesService=n,this.localesService=o,this.sectoresTrabajoService=i,this.router=S,this.clientes=[],this.locales=[],this.sectorForm=this.fb.group({cliente:["",a.k0.required],local:[{value:"",disabled:!0},a.k0.required],nombre:["",a.k0.required]})}ngOnInit(){this.loadClientes()}loadClientes(){this.clientesService.getClientes().subscribe(r=>{this.clientes=r})}onClienteChange(r){this.localesService.getLocalesByCliente(r.value).subscribe(o=>{this.locales=o,this.sectorForm.get("local")?.enable()})}onSubmit(){this.sectorForm.valid&&this.localesService.addSectorToLocal(this.sectorForm.value.local,this.sectorForm.value).subscribe(()=>{f().fire({title:"\xc9xito",text:"Sector creado correctamente",icon:"success"}),this.router.navigate(["/mantenedores/sectores-trabajo"])})}volver(){this.router.navigate(["/mantenedores/sectores-trabajo"])}static#e=this.\u0275fac=function(n){return new(n||t)(e.rXU(a.ok),e.rXU(Y.T),e.rXU(U.R),e.rXU(v.Y),e.rXU(b.Ix))};static#t=this.\u0275cmp=e.VBU({type:t,selectors:[["app-crear-sector"]],standalone:!0,features:[e.aNF],decls:34,vars:3,consts:[[1,"cardWithShadow"],[1,"p-24"],[3,"ngSubmit","formGroup"],[1,"row"],[1,"col-12"],["appearance","outline",1,"w-100"],["formControlName","cliente",3,"selectionChange"],[3,"value"],["formControlName","local",3,"disabled"],["matInput","","formControlName","nombre","placeholder","Ingrese el nombre del sector"],[1,"d-flex","justify-content-end","gap-2"],["mat-raised-button","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(n,o){1&n&&(e.j41(0,"mat-card",0)(1,"mat-card-content",1)(2,"form",2),e.bIt("ngSubmit",function(){return o.onSubmit()}),e.j41(3,"div",3)(4,"div",4)(5,"mat-form-field",5)(6,"mat-label"),e.EFF(7,"Cliente"),e.k0s(),e.j41(8,"mat-select",6),e.bIt("selectionChange",function(S){return o.onClienteChange(S)}),e.Z7z(9,x,2,2,"mat-option",7,E),e.k0s()()()(),e.j41(11,"div",3)(12,"div",4)(13,"mat-form-field",5)(14,"mat-label"),e.EFF(15,"Local"),e.k0s(),e.j41(16,"mat-select",8),e.Z7z(17,X,2,2,"mat-option",7,E),e.k0s()()()(),e.j41(19,"div",3)(20,"div",4)(21,"mat-form-field",5)(22,"mat-label"),e.EFF(23,"Nombre del Sector"),e.k0s(),e.nrm(24,"input",9),e.k0s()()(),e.j41(25,"div",10)(26,"button",11),e.bIt("click",function(){return o.volver()}),e.j41(27,"mat-icon"),e.EFF(28,"arrow_back"),e.k0s(),e.EFF(29," Volver "),e.k0s(),e.j41(30,"button",12)(31,"mat-icon"),e.EFF(32,"save"),e.k0s(),e.EFF(33," Guardar "),e.k0s()()()()()),2&n&&(e.R7$(2),e.Y8G("formGroup",o.sectorForm),e.R7$(7),e.Dyx(o.clientes),e.R7$(7),e.Y8G("disabled",!o.locales.length),e.R7$(),e.Dyx(o.locales),e.R7$(13),e.Y8G("disabled",o.sectorForm.invalid))},dependencies:[a.X1,a.qT,a.me,a.BC,a.cb,a.j4,a.JD,m.Hu,m.RN,m.m2,d.RG,d.rl,d.nJ,j.Ve,j.VO,w.wT,h.fS,h.fg,u.Hl,u.$z,p.m_,p.An]})}return t})();function B(t,c){1&t&&(e.j41(0,"mat-error"),e.EFF(1,"El nombre del sector es requerido"),e.k0s())}let V=(()=>{class t{constructor(r,n,o){this.fb=r,this.sectoresService=n,this.router=o,this.sectorForm=this.fb.group({nombre:["",[a.k0.required,a.k0.minLength(1)]]})}onSubmit(){this.sectorForm.invalid?f().fire({title:"Error",text:"Por favor, complete el nombre del sector",icon:"error"}):f().fire({title:"\xbfEst\xe1s seguro?",text:"\xbfDeseas crear este sector?",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, crear",cancelButtonText:"Cancelar"}).then(r=>{r.isConfirmed&&this.sectoresService.createSectorDefault(this.sectorForm.value).subscribe({next:()=>{f().fire({title:"\xc9xito",text:"Sector creado correctamente",icon:"success"}),this.router.navigate(["/mantenedores/sectores-trabajo"])},error:n=>{console.error("Error al crear sector:",n),f().fire({title:"Error",text:"No se pudo crear el sector",icon:"error"})}})})}volver(){this.router.navigate(["/mantenedores/sectores-trabajo"])}static#e=this.\u0275fac=function(n){return new(n||t)(e.rXU(a.ok),e.rXU(v.Y),e.rXU(b.Ix))};static#t=this.\u0275cmp=e.VBU({type:t,selectors:[["app-crear-sector-default"]],standalone:!0,features:[e.aNF],decls:19,vars:3,consts:[[1,"cardWithShadow"],[1,"p-24"],[3,"ngSubmit","formGroup"],[1,"row"],[1,"col-12"],["appearance","outline",1,"w-100"],["matInput","","formControlName","nombre","placeholder","Ingrese nombre del sector"],[1,"d-flex","justify-content-end","gap-2"],["mat-raised-button","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(n,o){if(1&n&&(e.j41(0,"mat-card",0)(1,"mat-card-content",1)(2,"form",2),e.bIt("ngSubmit",function(){return o.onSubmit()}),e.j41(3,"div",3)(4,"div",4)(5,"mat-form-field",5)(6,"mat-label"),e.EFF(7,"Nombre del Sector"),e.k0s(),e.nrm(8,"input",6),e.DNE(9,B,2,0,"mat-error"),e.k0s()()(),e.j41(10,"div",7)(11,"button",8),e.bIt("click",function(){return o.volver()}),e.j41(12,"mat-icon"),e.EFF(13,"arrow_back"),e.k0s(),e.EFF(14," Volver "),e.k0s(),e.j41(15,"button",9)(16,"mat-icon"),e.EFF(17,"save"),e.k0s(),e.EFF(18," Guardar "),e.k0s()()()()()),2&n){let i;e.R7$(2),e.Y8G("formGroup",o.sectorForm),e.R7$(7),e.vxM(null!=(i=o.sectorForm.get("nombre"))&&i.touched&&null!=(i=o.sectorForm.get("nombre"))&&i.invalid?9:-1),e.R7$(6),e.Y8G("disabled",o.sectorForm.invalid)}},dependencies:[m.Hu,m.RN,m.m2,a.X1,a.qT,a.me,a.BC,a.cb,a.j4,a.JD,a.YN,d.RG,d.rl,d.nJ,d.TL,h.fS,h.fg,u.Hl,u.$z,p.m_,p.An]})}return t})();var L=s(9164);function O(t,c){1&t&&(e.j41(0,"mat-error"),e.EFF(1,"El nombre del sector es requerido"),e.k0s())}const z=[{path:"",component:N,data:{title:"Sectores de Trabajo"}},{path:"crear-sector",component:_,data:{title:"Crear Sector"}},{path:"crear-sector-default",component:V,data:{title:"Crear Sector por defecto"}},{path:"editar-default/:id",component:(()=>{class t{constructor(r,n,o,i){this.fb=r,this.route=n,this.router=o,this.sectoresService=i,this.sectorForm=this.fb.group({nombre:["",a.k0.required]})}ngOnInit(){this.route.params.subscribe(r=>{this.sectorId=r.id,this.loadSector()})}loadSector(){this.sectoresService.findOne(this.sectorId).subscribe({next:r=>{this.sectorForm.patchValue({nombre:r.nombre})},error:r=>{console.error("Error cargando sector:",r),f().fire("Error","No se pudo cargar la informaci\xf3n del sector","error")}})}onSubmit(){this.sectorForm.valid&&this.sectoresService.updateSectorDefault(this.sectorId,this.sectorForm.value).subscribe({next:()=>{f().fire("\xc9xito","Sector actualizado correctamente","success"),this.router.navigate(["/mantenedores/sectores-trabajo"])},error:r=>{console.error("Error actualizando sector:",r),f().fire("Error","No se pudo actualizar el sector","error")}})}volver(){this.router.navigate(["/mantenedores/sectores-trabajo"])}static#e=this.\u0275fac=function(n){return new(n||t)(e.rXU(a.ok),e.rXU(b.nX),e.rXU(b.Ix),e.rXU(v.Y))};static#t=this.\u0275cmp=e.VBU({type:t,selectors:[["app-editar-sector-default"]],standalone:!0,features:[e.Jv_([v.Y]),e.aNF],decls:19,vars:3,consts:[[1,"cardWithShadow"],[1,"p-24"],[3,"ngSubmit","formGroup"],[1,"row"],[1,"col-12"],["appearance","outline",1,"w-100"],["matInput","","formControlName","nombre","placeholder","Ingrese nombre del sector"],[1,"d-flex","justify-content-end","gap-2"],["mat-raised-button","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(n,o){if(1&n&&(e.j41(0,"mat-card",0)(1,"mat-card-content",1)(2,"form",2),e.bIt("ngSubmit",function(){return o.onSubmit()}),e.j41(3,"div",3)(4,"div",4)(5,"mat-form-field",5)(6,"mat-label"),e.EFF(7,"Nombre del Sector"),e.k0s(),e.nrm(8,"input",6),e.DNE(9,O,2,0,"mat-error"),e.k0s()()(),e.j41(10,"div",7)(11,"button",8),e.bIt("click",function(){return o.volver()}),e.j41(12,"mat-icon"),e.EFF(13,"arrow_back"),e.k0s(),e.EFF(14," Volver "),e.k0s(),e.j41(15,"button",9)(16,"mat-icon"),e.EFF(17,"save"),e.k0s(),e.EFF(18," Guardar "),e.k0s()()()()()),2&n){let i;e.R7$(2),e.Y8G("formGroup",o.sectorForm),e.R7$(7),e.vxM(null!=(i=o.sectorForm.get("nombre"))&&i.touched&&null!=(i=o.sectorForm.get("nombre"))&&i.invalid?9:-1),e.R7$(6),e.Y8G("disabled",o.sectorForm.invalid)}},dependencies:[C.MD,L.G,d.rl,d.nJ,d.TL,h.fg,m.RN,m.m2,u.$z,p.An,a.X1,a.qT,a.me,a.BC,a.cb,a.j4,a.JD],encapsulation:2})}return t})(),data:{title:"Editar Sector por defecto"}}]}}]);