"use strict";(self.webpackChunkSpike=self.webpackChunkSpike||[]).push([[2207],{2207:(Ee,N,s)=>{s.r(N),s.d(N,{GENERAR_PROGRAMACION_ROUTES:()=>fe});var b=s(177),e=s(3953),c=s(9417),y=s(8834),$=s(5596),I=s(6600),G=s(5084),S=s(3719),M=s(9213),Y=s(9631),k=s(2798),A=s(850),V=s(1413),j=s(9172),_=s(6354),C=s(6977),F=s(1985),R=s(7673),P=s(1011),w=s(8032),E=s.n(w),O=s(8949),B=s(1643),U=s(9386),X=s(3500),J=s(1357),x=s(8887),W=s(5602),Q=s(2697),Z=s(1787),z=s(2168);function H(r,l){if(1&r&&(e.j41(0,"mat-option",32),e.EFF(1),e.k0s()),2&r){const o=l.$implicit;e.Y8G("value",o.id),e.R7$(),e.SpI(" ",o.nombre," ")}}function K(r,l){if(1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.k0s()),2&r){const o=e.XpG();e.R7$(),e.SpI(" ",o.getErrorMessage("clientId")," ")}}function q(r,l){if(1&r&&(e.j41(0,"mat-option",32),e.EFF(1),e.k0s()),2&r){const o=l.$implicit;e.Y8G("value",o.id),e.R7$(),e.SpI(" ",o.nombre_local," ")}}function ee(r,l){if(1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.k0s()),2&r){const o=e.XpG();e.R7$(),e.SpI(" ",o.getErrorMessage("localId")," ")}}function oe(r,l){if(1&r&&(e.j41(0,"mat-option",32),e.EFF(1),e.k0s()),2&r){const o=l.$implicit;e.Y8G("value",o.id),e.R7$(),e.SpI(" ",o.nombre," ")}}function te(r,l){1&r&&(e.j41(0,"mat-error"),e.EFF(1," El tipo de servicio es requerido "),e.k0s())}function ie(r,l){if(1&r&&(e.j41(0,"mat-option",32),e.EFF(1),e.k0s()),2&r){const o=l.$implicit;e.Y8G("value",o.id),e.R7$(),e.SpI(" ",o.nombre," ")}}function re(r,l){if(1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.k0s()),2&r){const o=e.XpG();e.R7$(),e.SpI(" ",o.getErrorMessage("especialidadId")," ")}}function ae(r,l){if(1&r&&(e.j41(0,"mat-option",32),e.EFF(1),e.k0s()),2&r){const o=l.$implicit;e.Y8G("value",o.id),e.R7$(),e.SpI(" ",o.nombre," ")}}function ne(r,l){if(1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.k0s()),2&r){const o=e.XpG();e.R7$(),e.SpI(" ",o.getErrorMessage("sectorTrabajoId")," ")}}function se(r,l){1&r&&(e.j41(0,"mat-error"),e.EFF(1," La fecha es requerida "),e.k0s())}function ce(r,l){1&r&&(e.j41(0,"mat-error"),e.EFF(1," La fecha no puede ser anterior a hoy "),e.k0s())}function le(r,l){if(1&r&&(e.j41(0,"mat-option",32),e.EFF(1),e.k0s()),2&r){const o=l.$implicit;e.Y8G("value",o.id),e.R7$(),e.Lme(" ",o.name," ",o.lastName," ")}}function me(r,l){if(1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.k0s()),2&r){const o=e.XpG();e.R7$(),e.SpI(" ",o.getErrorMessage("tecnico_asignado_id")," ")}}function pe(r,l){if(1&r&&(e.j41(0,"mat-option",32),e.EFF(1),e.k0s()),2&r){const o=l.$implicit;e.Y8G("value",o.id),e.R7$(),e.Lme(" ",o.name," ",o.lastName," ")}}function de(r,l){if(1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.k0s()),2&r){const o=e.XpG();e.R7$(),e.SpI(" ",o.getErrorMessage("tecnico_asignado_id_2")," ")}}function ue(r,l){if(1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.k0s()),2&r){const o=e.XpG();e.R7$(),e.SpI(" ",o.getErrorMessage("observaciones")," ")}}const ge={parse:{dateInput:"DD/MM/YYYY"},display:{dateInput:"DD/MM/YYYY",monthYearLabel:"MMMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}};var L=function(r){return r.PENDIENTE="pendiente",r.APROBADA="aprobada",r.RECHAZADA="rechazada",r.EN_SERVICIO="en_servicio",r.FINALIZADA="finalizada",r.VALIDADA="validada",r.REABIERTA="reabierta",r.PROGRAMADO="programado",r}(L||{});const fe=[{path:"",component:(()=>{class r{constructor(o,i,t,a,n,p,f,u,h,T,v){this.localesService=o,this.tipoServicioService=i,this.vehiculosService=t,this.programacionService=a,this.clientesService=n,this.dateAdapter=p,this.router=f,this.usersService=u,this.ordenServicioService=h,this.solicitarVisitaService=T,this.especialidadesService=v,this.locales=[],this.tiposServicio=[],this.sectores=[],this.especialidades=[],this.vehiculos=[],this.clientes=[],this.loading=!1,this.tecnicos=[],this.destroy$=new V.B,this.minDate=new Date,this.displayFn=d=>{const m=this.clientes.find(g=>g.id===d);return m?m.nombre:""},this.displayLocalFn=d=>{const m=this.locales.find(g=>g.id===d);return m?m.nombre_local:""},this.displayTecnicoFn=d=>{const m=this.tecnicos.find(g=>g.id===d);return m?`${m.name} ${m.lastName}`:""},this.displayTipoServicioFn=d=>{if(!d)return"";const m=this.tiposServicio.find(g=>g.id===d);return m?m.nombre:""},this.displayEspecialidadFn=d=>{if(!d)return"";const m=this.especialidades.find(g=>g.id===d);return m?m.nombre:""},this.initForm(),(0,b.EO)(P.A),this.dateAdapter.setLocale("en-GB"),this.getCurrentUser()}initForm(){this.programacionForm=new c.gE({clientId:new c.MJ("",[c.k0.required]),localId:new c.MJ({value:"",disabled:!0},[c.k0.required]),tipoServicioId:new c.MJ({value:"",disabled:!0},[c.k0.required]),sectorTrabajoId:new c.MJ("",[c.k0.required]),especialidadId:new c.MJ("",[c.k0.required]),status:new c.MJ(L.APROBADA,[c.k0.required]),fechaIngreso:new c.MJ("",[c.k0.required]),tecnico_asignado_id:new c.MJ("",[c.k0.required]),tecnico_asignado_id_2:new c.MJ(""),observaciones:new c.MJ("",[c.k0.maxLength(500)]),tipo_mantenimiento:new c.MJ(L.PROGRAMADO,[c.k0.required])}),this.programacionForm.get("tecnico_asignado_id")?.valueChanges.subscribe(o=>{const i=this.programacionForm.get("tecnico_asignado_id_2");o&&i?.value===o&&i&&i.setValue("")}),this.programacionForm.get("tecnico_asignado_id_2")?.valueChanges.subscribe(o=>{const i=this.programacionForm.get("tecnico_asignado_id");o&&i?.value===o&&(E().fire({title:"Error",text:"Este t\xe9cnico ya est\xe1 seleccionado como T\xe9cnico principal",icon:"error",confirmButtonText:"Ok"}),this.programacionForm.get("tecnico_asignado_id_2")?.setValue(""))}),this.programacionForm.get("clientId")?.valueChanges.subscribe(()=>{this.setupTipoServicioAutocomplete()})}ngOnInit(){this.loadInitialData(),this.setupFormSubscriptions(),this.setupClienteAutocomplete(),this.setupTipoServicioAutocomplete(),this.setupEspecialidadAutocomplete()}loadInitialData(){this.loading=!0,Promise.all([this.getTiposServicio(),this.getSectores(),this.getVehiculos(),this.getClientes(),this.getLocales(),this.getTecnicos(),this.loadEspecialidades()]).finally(()=>{this.loading=!1})}setupClienteAutocomplete(){this.filteredClientes=this.programacionForm.get("clientId").valueChanges.pipe((0,j.Z)(""),(0,_.T)(o=>"string"==typeof o?this.clientes.filter(i=>i.nombre.toLowerCase().includes(o.toLowerCase())):this.clientes))}setupFormSubscriptions(){this.programacionForm.get("clientId")?.valueChanges.pipe((0,C.Q)(this.destroy$)).subscribe(o=>{o?(this.programacionForm.get("localId")?.enable(),this.programacionForm.get("tipoServicioId")?.enable(),this.getLocales(),this.programacionForm.get("localId")?.reset(),this.programacionForm.get("tipoServicioId")?.reset(),this.getTiposServicio()):(this.programacionForm.get("localId")?.disable(),this.programacionForm.get("tipoServicioId")?.disable(),this.locales=[],this.tiposServicio=[])}),this.setupLocalAutocomplete(),this.programacionForm.get("tecnico_asignado_id")?.valueChanges.subscribe(o=>{const i=this.programacionForm.get("tecnico_asignado_id_2");o&&i?.value===o&&i&&i.setValue("")}),this.programacionForm.get("tecnico_asignado_id_2")?.valueChanges.subscribe(o=>{const i=this.programacionForm.get("tecnico_asignado_id");o&&i?.value===o&&(E().fire({title:"Error",text:"Este t\xe9cnico ya est\xe1 seleccionado como T\xe9cnico principal",icon:"error",confirmButtonText:"Ok"}),this.programacionForm.get("tecnico_asignado_id_2")?.setValue(""))})}setupLocalAutocomplete(){this.filteredLocales=this.programacionForm.get("localId").valueChanges.pipe((0,j.Z)(""),(0,_.T)(o=>{const i="string"==typeof o?o.toLowerCase():"";return this.locales.filter(t=>t.nombre_local.toLowerCase().includes(i))}))}getLocales(){const o=this.programacionForm.get("clientId")?.value;o?(this.loading=!0,this.localesService.getLocalesByCliente(o).pipe((0,C.Q)(this.destroy$),(0,_.T)(i=>i.sort((t,a)=>{const n=T=>{const v=T.match(/^\d+/);return v?parseInt(v[0]):null},p=t.nombre_local.toLowerCase(),f=a.nombre_local.toLowerCase(),u=n(p),h=n(f);return null!==u&&null!==h?u-h:null===u&&null!==h?-1:null!==u&&null===h?1:p.localeCompare(f,"es")}))).subscribe({next:i=>{this.locales=i,this.programacionForm.get("localId")?.enable()},error:i=>{this.showErrorMessage("Error al cargar los locales"),this.programacionForm.get("localId")?.disable()},complete:()=>{this.loading=!1}})):(this.locales=[],this.programacionForm.get("localId")?.disable())}getClientesFromLocalStorage(){const o=localStorage.getItem("currentUser");let i=null;if(o&&(i=JSON.parse(o),this.clientes=i.companies.filter(t=>5!==t.id&&"GRUMAN"!==t.nombre),this.getLocales(),1===this.clientes.length)){const t=this.clientes[0];this.programacionForm.get("clientId")?.setValue(t.id),this.programacionForm.get("clientId")?.disable(),this.getLocales()}}getClientes(){this.clientesService.getClientes().pipe((0,C.Q)(this.destroy$)).subscribe({next:o=>{this.clientes=o,this.getLocales()},error:o=>{this.showErrorMessage("Error al cargar los clientes")}})}getTiposServicio(){const o=this.programacionForm.get("clientId")?.value;o?this.clientesService.getCliente(o).pipe((0,C.Q)(this.destroy$),(0,_.T)(i=>({...i,tipoServicio:(i.tipoServicio||[]).sort((t,a)=>t.nombre.toLowerCase().localeCompare(a.nombre.toLowerCase(),"es"))}))).subscribe({next:i=>{this.tiposServicio=i.tipoServicio||[],console.log("Tipos de servicio cargados:",this.tiposServicio)},error:i=>{console.error("Error al cargar tipos de servicio:",i),this.tiposServicio=[]}}):this.tiposServicio=[]}getSectores(){this.sectores=[{id:1,nombre:"Todos"},{id:2,nombre:"Sala"},{id:3,nombre:"Trastienda"},{id:4,nombre:"Ba\xf1o"},{id:5,nombre:"Cocina"},{id:6,nombre:"Muebles de Belleza"},{id:7,nombre:"Acceso"}]}getVehiculos(){this.vehiculosService.getVehiculos().pipe((0,C.Q)(this.destroy$)).subscribe({next:o=>{this.vehiculos=o},error:o=>{this.showErrorMessage("Error al cargar los veh\xedculos")}})}getCurrentUser(){const o=localStorage.getItem("currentUser");o&&(this.currentUser=JSON.parse(o))}onSubmit(){if(this.programacionForm.invalid)return this.markFormGroupTouched(this.programacionForm),void this.showErrorMessage("Por favor, complete todos los campos requeridos correctamente");E().fire({title:"\xbfEst\xe1s seguro?",text:"\xbfQuieres crear la programaci\xf3n?",icon:"warning",showCancelButton:!0,confirmButtonText:"Crear",cancelButtonText:"Cancelar",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"}).then(o=>{if(o.isConfirmed){this.loading=!0;const t={...this.programacionForm.value,aprobada_por_id:this.currentUser?.id,generada_por_id:this.currentUser?.id};this.solicitarVisitaService.crearSolicitudVisita(t).pipe((0,C.Q)(this.destroy$)).subscribe({next:a=>{console.log("Solicitud de visita creada:",a),E().fire({title:"\xc9xito",html:`\n                <div style="text-align: left">\n                  <p><strong>Solicitud de visita generada correctamente</strong></p>\n                  <p><strong>N\xb0 Requerimiento:</strong> ${a.data.id}</p>\n                  <p><strong>Fecha:</strong> ${this.formatDate((new Date).toISOString())}</p>\n                </div>\n              `,icon:"success"}),this.router.navigate(["/transacciones/listado-programacion"])},error:a=>{console.error("Error al crear la solicitud de visita:",a),this.showErrorMessage(a.error?.message||"El cliente ya tiene una solicitud de visita programada en este mes"),this.loading=!1},complete:()=>{this.loading=!1}})}})}formatDate(o){return new Date(o).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})}markFormGroupTouched(o){Object.values(o.controls).forEach(i=>{i.markAsTouched(),i instanceof c.gE&&this.markFormGroupTouched(i)})}showSuccessMessage(o){E().fire({icon:"success",title:"\xa1\xc9xito!",text:o,timer:2e3,showConfirmButton:!1})}showErrorMessage(o){E().fire({icon:"error",title:"\xa1Error!",text:o})}getErrorMessage(o){const i=this.programacionForm.get(o);return i?.hasError("required")?"Este campo es requerido":i?.hasError("maxlength")?"El texto es demasiado largo":""}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}volver(){this.router.navigate(["/transacciones/listado-programacion"])}getTecnicos(){this.usersService.getAllTecnicos().pipe((0,C.Q)(this.destroy$)).subscribe(o=>{this.tecnicos=o})}getTecnicosDisponiblesParaSegundoSelect(){const o=this.programacionForm.get("tecnico_asignado_id")?.value;return this.tecnicos.filter(i=>i.id!==o)}onClienteFocus(){this.filteredClientes=new F.c(o=>{o.next(this.clientes)})}filtrarClientes(o){const i=o.target.value.toLowerCase();this.filteredClientes=new F.c(t=>{t.next(this.clientes.filter(a=>a.nombre.toLowerCase().includes(i)))})}onLocalFocus(){this.filteredLocales=new F.c(o=>{o.next(this.locales)})}filtrarLocales(o){const i=o.target.value.toLowerCase();this.filteredLocales=new F.c(t=>{t.next(this.locales.filter(a=>a.nombre_local.toLowerCase().includes(i)))})}onTecnico1Focus(){this.filteredTecnicos1=new F.c(o=>{o.next(this.tecnicos)})}onTecnico2Focus(){const o=this.programacionForm.get("tecnico_asignado_id")?.value;this.filteredTecnicos2=new F.c(i=>{i.next(this.tecnicos.filter(t=>t.id!==o))})}filtrarTecnicos1(o){const i=o.target.value.toLowerCase();this.filteredTecnicos1=new F.c(t=>{t.next(this.tecnicos.filter(a=>`${a.name} ${a.lastName}`.toLowerCase().includes(i)))})}filtrarTecnicos2(o){const i=o.target.value.toLowerCase(),t=this.programacionForm.get("tecnico_asignado_id")?.value;this.filteredTecnicos2=new F.c(a=>{a.next(this.tecnicos.filter(n=>n.id!==t&&`${n.name} ${n.lastName}`.toLowerCase().includes(i)))})}setupTipoServicioAutocomplete(){const o=this.programacionForm.get("tipoServicioId");o&&(this.filteredTipoServicio=o.valueChanges.pipe((0,j.Z)(""),(0,_.T)(i=>{const t="string"==typeof i?i.toLowerCase():"";return this.tiposServicio.filter(a=>a.nombre.toLowerCase().includes(t))})))}_filterTipoServicio(o){const i=o.toLowerCase();return this.tiposServicio.filter(t=>t.nombre.toLowerCase().includes(i))}onTipoServicioFocus(){this.filteredTipoServicio=(0,R.of)(this.tiposServicio)}filtrarTipoServicio(o){const i=o.target.value.toLowerCase();this.filteredTipoServicio=(0,R.of)(this.tiposServicio.filter(t=>t.nombre.toLowerCase().includes(i)))}loadEspecialidades(){this.especialidadesService.findAll().pipe((0,_.T)(o=>o.sort((i,t)=>i.nombre.toLowerCase().localeCompare(t.nombre.toLowerCase(),"es")))).subscribe({next:o=>{this.especialidades=o,console.log("Especialidades cargadas:",this.especialidades)},error:o=>{console.error("Error cargando especialidades:",o),this.showErrorMessage("Error al cargar las especialidades")}})}setupEspecialidadAutocomplete(){const o=this.programacionForm.get("especialidadId");o&&(this.filteredEspecialidades=o.valueChanges.pipe((0,j.Z)(""),(0,_.T)(i=>{const t="string"==typeof i?i.toLowerCase():"";return this._filterEspecialidades(t)})))}_filterEspecialidades(o){const i=o.toLowerCase();return this.especialidades.filter(t=>t.nombre.toLowerCase().includes(i))}onEspecialidadFocus(){this.filteredEspecialidades=(0,R.of)(this.especialidades)}filtrarEspecialidades(o){const i=o.target.value.toLowerCase();this.filteredEspecialidades=(0,R.of)(this._filterEspecialidades(i))}static#e=this.\u0275fac=function(i){return new(i||r)(e.rXU(O.R),e.rXU(B.Q),e.rXU(U.c),e.rXU(X.K),e.rXU(J.T),e.rXU(I.MJ),e.rXU(x.Ix),e.rXU(W.g),e.rXU(Q.A),e.rXU(Z.I),e.rXU(z.c))};static#o=this.\u0275cmp=e.VBU({type:r,selectors:[["app-generar-programacion"]],standalone:!0,features:[e.Jv_([{provide:e.xe9,useValue:"en-GB"},{provide:I.Ju,useValue:"en-GB"},{provide:I.de,useValue:ge}]),e.aNF],decls:118,vars:52,consts:[["auto","matAutocomplete"],["autoLocal","matAutocomplete"],["autoTipoServicio","matAutocomplete"],["autoEspecialidad","matAutocomplete"],["picker",""],["autoTecnico1","matAutocomplete"],["autoTecnico2","matAutocomplete"],[1,"cardWithShadow"],[1,"p-24"],[3,"ngSubmit","formGroup"],[1,"row"],[1,"col-sm-4","d-flex","align-items-center"],[1,"mat-subtitle-2","f-w-600","d-block","m-b-16"],[1,"col-sm-8"],["appearance","outline",1,"w-100"],["type","text","placeholder","Seleccionar Cliente","matInput","","formControlName","clientId",3,"focus","input","matAutocomplete"],[3,"opened","displayWith","autoActiveFirstOption"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Seleccionar Local","matInput","","formControlName","localId",3,"focus","input","matAutocomplete"],["type","text","matInput","","formControlName","tipoServicioId",3,"focus","input","matAutocomplete"],[3,"displayWith"],[4,"ngIf"],["type","text","placeholder","Seleccionar Especialidad","matInput","","formControlName","especialidadId",3,"focus","input","matAutocomplete"],["formControlName","sectorTrabajoId","placeholder","Seleccionar Sector"],["matInput","","formControlName","fechaIngreso","placeholder","DD/MM/YYYY",3,"matDatepicker","min"],["matSuffix","",3,"for"],["type","text","placeholder","Seleccionar T\xe9cnico","matInput","","formControlName","tecnico_asignado_id",3,"focus","input","matAutocomplete"],["type","text","placeholder","Seleccionar T\xe9cnico 2","matInput","","formControlName","tecnico_asignado_id_2",3,"focus","input","matAutocomplete"],["matInput","","formControlName","observaciones","placeholder","Ingrese observaciones","rows","4"],[1,"row","justify-content-end"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-raised-button","","type","button",3,"click"],[3,"value"]],template:function(i,t){if(1&i){const a=e.RV6();e.j41(0,"mat-card",7)(1,"mat-card-content",8)(2,"form",9),e.bIt("ngSubmit",function(){return e.eBV(a),e.Njj(t.onSubmit())}),e.j41(3,"div",10)(4,"div",11)(5,"mat-label",12),e.EFF(6,"Cliente *"),e.k0s()(),e.j41(7,"div",13)(8,"mat-form-field",14)(9,"input",15),e.bIt("focus",function(){return e.eBV(a),e.Njj(t.onClienteFocus())})("input",function(p){return e.eBV(a),e.Njj(t.filtrarClientes(p))}),e.k0s(),e.j41(10,"mat-autocomplete",16,0),e.bIt("opened",function(){return e.eBV(a),e.Njj(t.onClienteFocus())}),e.DNE(12,H,2,2,"mat-option",17),e.nI1(13,"async"),e.k0s(),e.DNE(14,K,2,1,"mat-error"),e.k0s()()(),e.j41(15,"div",10)(16,"div",11)(17,"mat-label",12),e.EFF(18,"Local *"),e.k0s()(),e.j41(19,"div",13)(20,"mat-form-field",14)(21,"input",18),e.bIt("focus",function(){return e.eBV(a),e.Njj(t.onLocalFocus())})("input",function(p){return e.eBV(a),e.Njj(t.filtrarLocales(p))}),e.k0s(),e.j41(22,"mat-autocomplete",16,1),e.bIt("opened",function(){return e.eBV(a),e.Njj(t.onLocalFocus())}),e.DNE(24,q,2,2,"mat-option",17),e.nI1(25,"async"),e.k0s(),e.DNE(26,ee,2,1,"mat-error"),e.k0s()()(),e.j41(27,"div",10)(28,"div",11)(29,"mat-label",12),e.EFF(30,"Tipo de Servicio *"),e.k0s()(),e.j41(31,"div",13)(32,"mat-form-field",14)(33,"mat-label"),e.EFF(34,"Tipo de Servicio"),e.k0s(),e.j41(35,"input",19),e.bIt("focus",function(){return e.eBV(a),e.Njj(t.onTipoServicioFocus())})("input",function(p){return e.eBV(a),e.Njj(t.filtrarTipoServicio(p))}),e.k0s(),e.j41(36,"mat-autocomplete",20,2),e.DNE(38,oe,2,2,"mat-option",17),e.nI1(39,"async"),e.k0s(),e.DNE(40,te,2,0,"mat-error",21),e.k0s()()(),e.j41(41,"div",10)(42,"div",11)(43,"mat-label",12),e.EFF(44,"Especialidad *"),e.k0s()(),e.j41(45,"div",13)(46,"mat-form-field",14)(47,"mat-label"),e.EFF(48,"Especialidad"),e.k0s(),e.j41(49,"input",22),e.bIt("focus",function(){return e.eBV(a),e.Njj(t.onEspecialidadFocus())})("input",function(p){return e.eBV(a),e.Njj(t.filtrarEspecialidades(p))}),e.k0s(),e.j41(50,"mat-autocomplete",16,3),e.bIt("opened",function(){return e.eBV(a),e.Njj(t.onEspecialidadFocus())}),e.DNE(52,ie,2,2,"mat-option",17),e.nI1(53,"async"),e.k0s(),e.DNE(54,re,2,1,"mat-error",21),e.k0s()()(),e.j41(55,"div",10)(56,"div",11)(57,"mat-label",12),e.EFF(58,"Sector del trabajo *"),e.k0s()(),e.j41(59,"div",13)(60,"mat-form-field",14)(61,"mat-select",23),e.DNE(62,ae,2,2,"mat-option",17),e.k0s(),e.DNE(63,ne,2,1,"mat-error"),e.k0s()()(),e.j41(64,"div",10)(65,"div",11)(66,"mat-label",12),e.EFF(67,"Seleccionar d\xeda *"),e.k0s()(),e.j41(68,"div",13)(69,"mat-form-field",14)(70,"mat-label"),e.EFF(71,"Fecha de visita"),e.k0s(),e.nrm(72,"input",24)(73,"mat-datepicker-toggle",25)(74,"mat-datepicker",null,4),e.DNE(76,se,2,0,"mat-error",21)(77,ce,2,0,"mat-error",21),e.k0s()()(),e.j41(78,"div",10)(79,"div",11)(80,"mat-label",12),e.EFF(81,"T\xe9cnico *"),e.k0s()(),e.j41(82,"div",13)(83,"mat-form-field",14)(84,"input",26),e.bIt("focus",function(){return e.eBV(a),e.Njj(t.onTecnico1Focus())})("input",function(p){return e.eBV(a),e.Njj(t.filtrarTecnicos1(p))}),e.k0s(),e.j41(85,"mat-autocomplete",16,5),e.bIt("opened",function(){return e.eBV(a),e.Njj(t.onTecnico1Focus())}),e.DNE(87,le,2,3,"mat-option",17),e.nI1(88,"async"),e.k0s(),e.DNE(89,me,2,1,"mat-error"),e.k0s()()(),e.j41(90,"div",10)(91,"div",11)(92,"mat-label",12),e.EFF(93,"T\xe9cnico 2 (Opcional)"),e.k0s()(),e.j41(94,"div",13)(95,"mat-form-field",14)(96,"input",27),e.bIt("focus",function(){return e.eBV(a),e.Njj(t.onTecnico2Focus())})("input",function(p){return e.eBV(a),e.Njj(t.filtrarTecnicos2(p))}),e.k0s(),e.j41(97,"mat-autocomplete",16,6),e.bIt("opened",function(){return e.eBV(a),e.Njj(t.onTecnico2Focus())}),e.DNE(99,pe,2,3,"mat-option",17),e.nI1(100,"async"),e.k0s(),e.DNE(101,de,2,1,"mat-error"),e.k0s()()(),e.j41(102,"div",10)(103,"div",11)(104,"mat-label",12),e.EFF(105,"Observaciones"),e.k0s()(),e.j41(106,"div",13)(107,"mat-form-field",14),e.nrm(108,"textarea",28),e.DNE(109,ue,2,1,"mat-error"),e.k0s()()(),e.j41(110,"div",29)(111,"div",13)(112,"button",30),e.EFF(113),e.k0s(),e.j41(114,"button",31),e.bIt("click",function(){return e.eBV(a),e.Njj(t.volver())}),e.EFF(115,"Volver"),e.j41(116,"mat-icon"),e.EFF(117,"arrow_back"),e.k0s()()()()()()()}if(2&i){let a,n,p,f,u,h,T,v,d,m;const g=e.sdS(11),he=e.sdS(23),ve=e.sdS(37),Fe=e.sdS(51),D=e.sdS(75),_e=e.sdS(86),Ce=e.sdS(98);e.R7$(2),e.Y8G("formGroup",t.programacionForm),e.R7$(7),e.Y8G("matAutocomplete",g),e.R7$(),e.Y8G("displayWith",t.displayFn)("autoActiveFirstOption",!0),e.R7$(2),e.Y8G("ngForOf",e.bMT(13,40,t.filteredClientes)),e.R7$(2),e.vxM(null!=(a=t.programacionForm.get("clientId"))&&a.touched&&null!=(a=t.programacionForm.get("clientId"))&&a.invalid?14:-1),e.R7$(7),e.Y8G("matAutocomplete",he),e.R7$(),e.Y8G("displayWith",t.displayLocalFn)("autoActiveFirstOption",!0),e.R7$(2),e.Y8G("ngForOf",e.bMT(25,42,t.filteredLocales)),e.R7$(2),e.vxM(null!=(n=t.programacionForm.get("localId"))&&n.touched&&null!=(n=t.programacionForm.get("localId"))&&n.invalid?26:-1),e.R7$(9),e.Y8G("matAutocomplete",ve),e.R7$(),e.Y8G("displayWith",t.displayTipoServicioFn),e.R7$(2),e.Y8G("ngForOf",e.bMT(39,44,t.filteredTipoServicio)),e.R7$(2),e.Y8G("ngIf",null==(p=t.programacionForm.get("tipoServicioId"))?null:p.hasError("required")),e.R7$(9),e.Y8G("matAutocomplete",Fe),e.R7$(),e.Y8G("displayWith",t.displayEspecialidadFn)("autoActiveFirstOption",!0),e.R7$(2),e.Y8G("ngForOf",e.bMT(53,46,t.filteredEspecialidades)),e.R7$(2),e.Y8G("ngIf",(null==(f=t.programacionForm.get("especialidadId"))?null:f.touched)&&(null==(f=t.programacionForm.get("especialidadId"))?null:f.invalid)),e.R7$(8),e.Y8G("ngForOf",t.sectores),e.R7$(),e.vxM(null!=(u=t.programacionForm.get("sectorTrabajoId"))&&u.touched&&null!=(u=t.programacionForm.get("sectorTrabajoId"))&&u.invalid?63:-1),e.R7$(9),e.Y8G("matDatepicker",D)("min",t.minDate),e.R7$(),e.Y8G("for",D),e.R7$(3),e.Y8G("ngIf",null==(h=t.programacionForm.get("fechaIngreso"))?null:h.hasError("required")),e.R7$(),e.Y8G("ngIf",null==(T=t.programacionForm.get("fechaIngreso"))?null:T.hasError("matDatepickerMin")),e.R7$(7),e.Y8G("matAutocomplete",_e),e.R7$(),e.Y8G("displayWith",t.displayTecnicoFn)("autoActiveFirstOption",!0),e.R7$(2),e.Y8G("ngForOf",e.bMT(88,48,t.filteredTecnicos1)),e.R7$(2),e.vxM(null!=(v=t.programacionForm.get("tecnico_asignado_id"))&&v.touched&&null!=(v=t.programacionForm.get("tecnico_asignado_id"))&&v.invalid?89:-1),e.R7$(7),e.Y8G("matAutocomplete",Ce),e.R7$(),e.Y8G("displayWith",t.displayTecnicoFn)("autoActiveFirstOption",!0),e.R7$(2),e.Y8G("ngForOf",e.bMT(100,50,t.filteredTecnicos2)),e.R7$(2),e.vxM(null!=(d=t.programacionForm.get("tecnico_asignado_id_2"))&&d.touched&&null!=(d=t.programacionForm.get("tecnico_asignado_id_2"))&&d.invalid?101:-1),e.R7$(8),e.vxM(null!=(m=t.programacionForm.get("observaciones"))&&m.touched&&null!=(m=t.programacionForm.get("observaciones"))&&m.invalid?109:-1),e.R7$(3),e.Y8G("disabled",t.loading),e.R7$(),e.SpI(" ",t.loading?"Enviando...":"Enviar"," ")}},dependencies:[b.MD,b.Sq,b.bT,b.Jj,Y.fS,Y.fg,S.rl,S.nJ,S.TL,S.yw,c.YN,c.qT,c.me,c.BC,c.cb,c.X1,c.j4,c.JD,$.Hu,$.RN,$.m2,S.RG,k.Ve,k.VO,I.wT,y.Hl,y.$z,M.m_,M.An,G.X6,G.Vh,G.bZ,G.bU,I.WX,A.jL,A.$3,A.pN]})}return r})(),data:{title:"Generar programaci\xf3n"}}]}}]);